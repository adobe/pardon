import{q as ct,u as ut,i as Ws,v as Le,x as Ii,y as Ni,z as Wi,A as zi,B as zs,C as Bs,D as Ie,E as Bi,F as Ui,G as Gi,I as qi,J as Hi,K as Vi,L as Ki,M as Ji,N as Ke,O as Yi,P as Zi,Q as Us,t as C,R as Xi,T as Qi,U as tn,n as Ne,V as en,l as ns,W as rs,S as We,X as Ee,m as nt,Y as os,Z as gt,a as sn,_ as nn,r as rn,$ as as,a0 as hs,h as ze,a1 as de,g as Gs,a2 as Qt,c as qs,a3 as on,H as Hs,d as Vs,a4 as an,a5 as hn,a6 as Ks,a7 as cn,j as ln}from"./schema-utils--9Z99Pw3.CcP18aF2.js";import{K as yt,m as q,p as Be,c as un,P as G,e as cs,b as It,i as fn,J as Ft,f as ie,g as xe,h as dn,j as pn,d as Js,v as ls,k as Je,l as mn,n as Ue}from"./index.Btz51mwu.js";function gn(i,t){const e=[];for(let s=0;s<i.length;s++)try{const n=/^@?[a-z0-9_-]+=/i.test(i[s])&&yt.parse(i[s],"object");n&&(i.splice(s--,1),e.push(Object.entries(n)[0]))}catch(n){throw n}return e}function wn(i){return i.startsWith("'")?i.slice(1,-1):i.startsWith('"')?i.slice(1,-1).replace(/\\(.)/g,"$1"):i.startsWith("\\")?i[1]===`
`?"":i[1]:i}function yn(i){const t=i.trim().split(/(\s+|"(?:\\.|[^"\\])*"|'(?:[^'])*'|[^\\'"\s]+|\\.)/s),e=[];for(let s=1,n=-1;s<t.length;s+=2){if(n>=0&&!t[s].trim()){e[++n]="";continue}if(t[s-1].length)throw new Error("unparsable shell-like command: unexpected "+t[s-1]);n<0&&(e[n=0]=""),e[n]+=wn(t[s])}if(t[t.length-1].length)throw new Error("unparsable shell-like command - unclosed quote or escape sequence");return e}const vn={parse:On,stringify:xn};function Ce(i){return String(i??"").replace(/["\\]/g,t=>`\\${t}`)}function bn(i){return String(i??"").replace(/'/g,`'"'"'`)}function Sn(i=[]){return Array.isArray(i)?i:i instanceof Headers?[...i.entries()]:Object.entries(i)}function En(i){return Ni(i)?i:`$(dig +short "${i}" | tail -1)`}function xn(i,{include:t}={}){const{method:e,headers:s,body:n,meta:{resolve:r,insecure:o}={}}=i,a=ut(i),h=a.port||(a.protocol=="https:"?443:80);return[`curl ${e!=="GET"?`--request ${e} `:""}"${Ce(a)}"`,r&&`--resolve "${a.hostname}:${h}:${En(r)}"`,o&&o!=="false"&&"--insecure",t&&"--include",...Sn(s).map(([c,l])=>`--header "${Ce(c)}: ${Ce(l)}"`),...n?[`--data-raw '${bn(n)}'`]:[]].filter(Boolean).join(` \\
  `)}const Cn=["Connection","Content-Length","Keep-Alive","TE","Transfer-Encoding","Trailer","Upgrade","Proxy-Authorization","Proxy-Authenticate"];function On(i){const t=yn(i);if(t[0]!=="curl")throw new Error(`not a curl command: ${t[0]} ...`);const{values:e,positionals:s}=Ii({args:t.slice(1),allowPositionals:!0,options:{request:{short:"X",type:"string"},header:{type:"string",short:"H",multiple:!0},include:{short:"i",type:"boolean"},location:{short:"L",type:"boolean"},data:{short:"d",type:"string"},"data-ascii":{type:"string"},"data-binary":{type:"string"},"data-raw":{type:"string"},json:{type:"string"},form:{short:"F",type:"string",multiple:!0},compressed:{type:"boolean"},url:{type:"string"}}}),n=e.include,r=It(gn(s),([d,m])=>({[d]:m})),o=e.url??s.shift();if(!o)throw new G("curl-fmt: no positional arguments or --url");const{origin:a,pathname:h,searchParams:c}=ut(o),l=ct(e.header?.map(d=>{const[,m,p]=/^([^:]*?):(.*)$/.exec(d)||[];return[m.trim(),p.trim()]}));for(const d of Cn)l.delete(d);e.json&&(l.append("Content-Type","application/json"),l.append("Accept","application/json"));const u=e.data!==void 0?{body:e.data}:e.json!==void 0?{body:e.json,encoding:"form"}:e["data-raw"]!==void 0?{body:e["data-raw"]}:e["data-ascii"]!==void 0?{body:e["data-ascii"]}:e["data-binary"]!==void 0?{body:e["data-binary"],encoding:"raw"}:e.form?{body:fn(It(e.form??[],d=>{const[,m,p]=/^([^=]*?)=(.*)$/.exec(d)||[void 0,d];return{[decodeURIComponent(m)]:p?decodeURIComponent(p):""}})).toString(),encoding:"form"}:{},f=e.request??(u.body!==void 0?"POST":"GET");return{options:{include:n},request:{method:f,origin:a,pathname:h??(a?"/":void 0),searchParams:c,meta:{},headers:l,values:r,...u}}}function Ys(i){const t=i.split(`
`);let e=0;return{peek(){return t[e]},next(){return t[e++]},rest(){return t.slice(e)},get eof(){return e>=t.length}}}const ne={parse:kn,stringify:Tn,requestObject:{json:Mn,fromJSON:Dn},responseObject:{parse:Pn,stringify:An,json:jn,fromJSON:Rn}};function $n(i,t,e,s){const n=s?.limit??1/0;let r=i,o=r.length;const a=`${" ".repeat(s?.indent??2)}`;for(const c of t?.split("/").slice(1)||[])o+1+c.length>n&&(o=a.length,r+=`
${a}`),r+=`/${c}`,o+=1+c.length;if(!e.size)return r;if(o+String(e).length<=n)return r+e;let h=0;for(const[c,l]of e.entries())r+=`
${a}${h++==0?"?":"&"}${cs(c)}=${cs(l)}`;return r}function Tn({values:i,...t},e){const{origin:s,pathname:n,searchParams:r}=ut(t),o=yt.stringify(i??{},e?.kv??{indent:2,limit:e?.limit??80,split:!0,trailer:`
`}),a=`${s?.trim()?`${t.method??"GET"} `:""}${s??""}`,h=$n(a,n,r,e);return`${o}${h}${[...Object.entries(t.meta??{})].map(([c,l])=>`
[${c}]: ${l}`).join("")}${[...ct(t.headers)??[]].map(([c,l])=>`
${c}: ${l}`).join("")}${t.body?`

${t.body}`:""}`.trim()}function An(i){const{status:t,statusText:e,headers:s}=i;return`${t}${e?` ${e}`:""}${[...s.entries()].map(([n,r])=>`
${n}: ${r}`).join("")}${i.body?`

${i.body}`:""}
`.trim()}function jn(i){return{status:Number(i.status??0),statusText:i.statusText,headers:[...i.headers||[]],body:i.body}}function Rn(i){return{status:i.status,statusText:i.statusText,headers:ct(i.headers),body:i.body}}function kn(i,t={}){const{[yt.unparsed]:e,...s}=yt.parse(i,"stream",{allowExpressions:!0}),n=Ys(e??""),r={},o=Object.assign({},q(s,{select(p,g){return yt.isExprValue(p)?(r[g]=`{{ -${g} = $$expr(${JSON.stringify(yt.loadExprValue(p))}) }}`,!1):!0}}));if(t.acceptcurl&&/^curl\s/.test(n.peek().trim())){const{request:{values:p,...g}}=vn.parse(n.rest().join(`
`)),[w,{headers:y,...b}]=Ws(g);return{...Le(w),headers:ct(y),...b,values:{...p,...o}}}const a=n.next();if(!a.trim())return{values:o};const h=Be(a),c=/^\s*(?:([A-Z]+)\s+)?((?:https?:)?[/][/].*)?/.exec(h.template).slice(0,4).map(p=>p&&un(p,h));if(!c)throw new G("failed to parse http request, expected maybe a method and url: "+a);let[,l="GET",u=""]=c;for(Nt(n);!n.eof&&/^\s*[/?&]/.test(n.peek());)u+=Xs(n.next().trim()),Nt(n);const{headers:f,meta:d}=Zs(n),m=Qs(n);return{...Le(u),method:l,meta:d,headers:ct(f),...m&&{body:m},values:o,computations:r}}function Pn(i){const t=Ys(i??"");Nt(t,{andBlankLines:!0});const[,e,s]=/\s*(\d+?)(?:\s+(.*))?$/.exec(t.next().trim()),{headers:n,meta:r}=Zs(t),o=Qs(t);return{status:e,statusText:s,headers:ct(n),meta:r,body:o}}function Zs(i){const t=[],e={};for(;Nt(i),!i.eof;){const s=Xs(i.next());if(!s)break;const n=/^\s*\[(\s*[^:\]]+)\s*\]\s*:\s*(.*)$/.exec(s);if(n){const[,h,c]=n;e[h]=c;continue}const r=/^\s*([^:]+):\s*(.*)$/.exec(s);if(!r)throw new G("invalid headerline: "+s);const[,o,a]=r;t.push([o.trimEnd(),a])}return{headers:t,meta:e}}function Mn(i){return{method:i.method??"GET",url:ut(i).toString(),headers:[...i.headers||[]],body:i.body,values:i.values,meta:i.meta}}function Dn(i){const{origin:t,pathname:e,searchParams:s}=ut(i.url);return{method:i.method,origin:t,pathname:e,searchParams:s,meta:i.meta,headers:ct(i.headers),body:i.body,values:i.values}}function Xs(i){return i.replace(/\s*(?:#.*)?$/,"")}function Nt(i,{andBlankLines:t=!1}={}){for(;!i.eof&&(/^#/.test(i.peek())||t&&!i.peek().trim());)i.next()}function Qs(i){const t=[];for(;Nt(i,{andBlankLines:!1}),!i.eof;)t.push(i.next());return t.join(`
`).trim()}function re(i){if(!i)return i;switch(typeof i){case"object":{if(i instanceof Number)return i;if(Array.isArray(i))return i.length===0?void 0:i.map(re);if(Object.keys(i).length===0)return;const t=Object.entries(i).map(([e,s])=>[e,re(s)]).filter(([,e])=>e!==void 0);return t.length===0?void 0:t.reduce((e,[s,n])=>Object.assign(e,{[s]:n}),{})}default:return i}}function _n(){let i;return{promise:new Promise((e,s)=>i={resolve:e,reject:s}),resolution:i}}const Ge=new Map;new FinalizationRegistry(i=>{const t=Ge.get(i);t&&(t.resolution=void 0),Ge.delete(i)});let Fn;const Ln=Wi();function In(){Ge.delete(Fn)}function Nn(i){if(ti===0){const e=Promise.resolve().then(()=>i());return e.catch(()=>{}),e}let t;return(t=Wn(i)).catch(()=>{}),t}async function Wn(i){return await null,In(),await null,i()}let ti=0;new FinalizationRegistry(i=>{--ti==0&&Ln.disable(),zn(i)});const Oe={};Oe.next=Oe.prev=Oe;function zn(i){i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=i}Promise.all=(i=>async(...[t])=>{ei(t);for(const e of t)try{await e}catch{}return i.call(Promise,t)})(Promise.all);Promise.allSettled=(i=>async(...[t])=>{ei(t);for(const e of t)try{await e}catch{}return i.call(Promise,t)})(Promise.allSettled);function ei(i){for(const t of i)typeof t?.then=="function"&&t?.then?.(()=>{},()=>{})}var E={env:{},versions:{node:"22.16.0",acorn:"8.14.1",ada:"2.9.2",amaro:"0.4.1",ares:"1.34.5",brotli:"1.1.0",cjs_module_lexer:"2.1.0",cldr:"47.0",icu:"77.1",llhttp:"9.2.1",modules:"127",napi:"10",nbytes:"0.1.1",ncrypto:"0.0.1",nghttp2:"1.64.0",openssl:"3.0.16",simdjson:"3.12.2",simdutf:"6.4.2",sqlite:"3.49.1",tz:"2025b",undici:"6.21.2",unicode:"16.0",uv:"1.49.2",uvwasi:"0.0.21",v8:"12.4.254.21-node.26",zlib:"1.3.0.1-motley-780819f",zstd:"1.5.7"},version:"v1.0.0"},$e={},Bn=Object.defineProperty,Un=(i,t,e)=>t in i?Bn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Gn=(i,t,e)=>Un(i,t+"",e);function qn(i){function t(s,n){return i[s](n).catch(r=>{const o=new Hn({cause:r,step:s,info:n});throw i.error(o,n),o})}function e(s){let n,r,o,a,h,c,l;function u(m,p){return Object.defineProperties(Ne(m),q(Object.getOwnPropertyDescriptors(p),g=>({...g,enumerable:!1,configurable:!1})))}return n??(n=u(Promise.resolve(i.init(s)),{get context(){return n},get match(){return f()},get preview(){return f().preview},get egress(){return f().egress},get ingress(){return f().egress.ingress},get result(){return f().egress.ingress.result},reprocess:d}));function f(){return r??(r=u(n.then(g=>t("match",{context:g})),{context:n,get match(){return r},get preview(){return m()},get egress(){return p()},get ingress(){return p().ingress},get result(){return p().ingress.result},reprocess:d}));function m(){return o??(o=u(Promise.all([n,r]).then(([g,w])=>t("preview",{context:g,match:w})),{context:n,match:r,preview:o,get egress(){return p()},get ingress(){return p().ingress},get result(){return p().ingress.result},reprocess:d}))}function p(){return a??(a=u(Promise.all([n,r]).then(([w,y])=>t("render",{context:w,match:y})),{context:n,match:r,get preview(){return m()},get egress(){return a},get ingress(){return g()},get result(){return g().result},reprocess:d}));function g(){return h??(h=Promise.all([n,r,a]).then(([y,b,v])=>t("fetch",{context:y,match:b,egress:v}))),c??(c=u(h.then(async y=>(await w(),y)),{context:n,match:r,get preview(){return m()},egress:a,get ingress(){return c},get result(){return w()},reprocess:d}));function w(){return l??(l=u(Promise.all([n,r,a]).then(([y,b,v])=>{const S={context:y,match:b,egress:v};return h.then($=>t("process",{...S,ingress:$}),$=>t("process",{...S,error:$}))}),{context:n,match:r,get preview(){return m()},egress:a,ingress:c,get result(){return l},reprocess:d}))}}}}async function d(m){const p={...await n,...m},g=await t("match",{context:p}),w=await n.egress,y=await n.ingress;return t("process",{context:p,match:g,egress:w,ingress:y})}}return{executor:i,init(s){return e(s)},match(s){return e(s).match},preview(s){return e(s).preview},render(s){return e(s).egress},fetch(s){return e(s).ingress},process(s){return e(s).result}}}class Hn extends Error{constructor({cause:t,step:e,info:s}){super(s?.match?.endpoint?.configuration?.path?`${s?.match?.endpoint?.configuration?.path} (${e})`:`failed at (${e})`,{cause:t}),Gn(this,"step"),this.step=e}get formatted(){let t=this;const e=[];for(;t?.cause!==void 0;)t=t.cause,e.unshift(String(t?.message??t));return e.unshift(String(this?.message??this)),e.join(`
 -- `)}}const si=(i,t,e)=>{const s=i instanceof RegExp?us(i,e):i,n=t instanceof RegExp?us(t,e):t,r=s!==null&&n!=null&&Vn(s,n,e);return r&&{start:r[0],end:r[1],pre:e.slice(0,r[0]),body:e.slice(r[0]+s.length,r[1]),post:e.slice(r[1]+n.length)}},us=(i,t)=>{const e=t.match(i);return e?e[0]:null},Vn=(i,t,e)=>{let s,n,r,o,a,h=e.indexOf(i),c=e.indexOf(t,h+1),l=h;if(h>=0&&c>0){if(i===t)return[h,c];for(s=[],r=e.length;l>=0&&!a;){if(l===h)s.push(l),h=e.indexOf(i,l+1);else if(s.length===1){const u=s.pop();u!==void 0&&(a=[u,c])}else n=s.pop(),n!==void 0&&n<r&&(r=n,o=c),c=e.indexOf(t,l+1);l=h<c&&h>=0?h:c}s.length&&o!==void 0&&(a=[r,o])}return a},ii="\0SLASH"+Math.random()+"\0",ni="\0OPEN"+Math.random()+"\0",Ye="\0CLOSE"+Math.random()+"\0",ri="\0COMMA"+Math.random()+"\0",oi="\0PERIOD"+Math.random()+"\0",Kn=new RegExp(ii,"g"),Jn=new RegExp(ni,"g"),Yn=new RegExp(Ye,"g"),Zn=new RegExp(ri,"g"),Xn=new RegExp(oi,"g"),Qn=/\\\\/g,tr=/\\{/g,er=/\\}/g,sr=/\\,/g,ir=/\\./g;function Te(i){return isNaN(i)?i.charCodeAt(0):parseInt(i,10)}function nr(i){return i.replace(Qn,ii).replace(tr,ni).replace(er,Ye).replace(sr,ri).replace(ir,oi)}function rr(i){return i.replace(Kn,"\\").replace(Jn,"{").replace(Yn,"}").replace(Zn,",").replace(Xn,".")}function ai(i){if(!i)return[""];const t=[],e=si("{","}",i);if(!e)return i.split(",");const{pre:s,body:n,post:r}=e,o=s.split(",");o[o.length-1]+="{"+n+"}";const a=ai(r);return r.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),t.push.apply(t,o),t}function or(i){return i?(i.slice(0,2)==="{}"&&(i="\\{\\}"+i.slice(2)),Pt(nr(i),!0).map(rr)):[]}function ar(i){return"{"+i+"}"}function hr(i){return/^-?0\d/.test(i)}function cr(i,t){return i<=t}function lr(i,t){return i>=t}function Pt(i,t){const e=[],s=si("{","}",i);if(!s)return[i];const n=s.pre,r=s.post.length?Pt(s.post,!1):[""];if(/\$$/.test(s.pre))for(let o=0;o<r.length;o++){const a=n+"{"+s.body+"}"+r[o];e.push(a)}else{const o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),h=o||a,c=s.body.indexOf(",")>=0;if(!h&&!c)return s.post.match(/,(?!,).*\}/)?(i=s.pre+"{"+s.body+Ye+s.post,Pt(i)):[i];let l;if(h)l=s.body.split(/\.\./);else if(l=ai(s.body),l.length===1&&l[0]!==void 0&&(l=Pt(l[0],!1).map(ar),l.length===1))return r.map(f=>s.pre+l[0]+f);let u;if(h&&l[0]!==void 0&&l[1]!==void 0){const f=Te(l[0]),d=Te(l[1]),m=Math.max(l[0].length,l[1].length);let p=l.length===3&&l[2]!==void 0?Math.abs(Te(l[2])):1,g=cr;d<f&&(p*=-1,g=lr);const y=l.some(hr);u=[];for(let b=f;g(b,d);b+=p){let v;if(a)v=String.fromCharCode(b),v==="\\"&&(v="");else if(v=String(b),y){const S=m-v.length;if(S>0){const $=new Array(S+1).join("0");b<0?v="-"+$+v.slice(1):v=$+v}}u.push(v)}}else{u=[];for(let f=0;f<l.length;f++)u.push.apply(u,Pt(l[f],!1))}for(let f=0;f<u.length;f++)for(let d=0;d<r.length;d++){const m=n+u[f]+r[d];(!t||h||m)&&e.push(m)}}return e}const ur=1024*64,oe=i=>{if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>ur)throw new TypeError("pattern is too long")},fr={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ot=i=>i.replace(/[[\]\\-]/g,"\\$&"),dr=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),fs=i=>i.join(""),pr=(i,t)=>{const e=t;if(i.charAt(e)!=="[")throw new Error("not in a brace expression");const s=[],n=[];let r=e+1,o=!1,a=!1,h=!1,c=!1,l=e,u="";t:for(;r<i.length;){const p=i.charAt(r);if((p==="!"||p==="^")&&r===e+1){c=!0,r++;continue}if(p==="]"&&o&&!h){l=r+1;break}if(o=!0,p==="\\"&&!h){h=!0,r++;continue}if(p==="["&&!h){for(const[g,[w,y,b]]of Object.entries(fr))if(i.startsWith(g,r)){if(u)return["$.",!1,i.length-e,!0];r+=g.length,b?n.push(w):s.push(w),a=a||y;continue t}}if(h=!1,u){p>u?s.push(Ot(u)+"-"+Ot(p)):p===u&&s.push(Ot(p)),u="",r++;continue}if(i.startsWith("-]",r+1)){s.push(Ot(p+"-")),r+=2;continue}if(i.startsWith("-",r+1)){u=p,r+=2;continue}s.push(Ot(p)),r++}if(l<r)return["",!1,0,!1];if(!s.length&&!n.length)return["$.",!1,i.length-e,!0];if(n.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!c){const p=s[0].length===2?s[0].slice(-1):s[0];return[dr(p),!1,l-e,!1]}const f="["+(c?"^":"")+fs(s)+"]",d="["+(c?"":"^")+fs(n)+"]";return[s.length&&n.length?"("+f+"|"+d+")":s.length?f:d,a,l-e,!0]},vt=(i,{windowsPathsNoEscape:t=!1,magicalBraces:e=!0}={})=>e?t?i.replace(/\[([^\/\\])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):t?i.replace(/\[([^\/\\{}])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1"),mr=new Set(["!","?","+","*","@"]),ds=i=>mr.has(i),gr="(?!(?:^|/)\\.\\.?(?:$|/))",qt="(?!\\.)",wr=new Set(["[","."]),yr=new Set(["..","."]),vr=new Set("().*{}+?[]^$\\!"),br=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ze="[^/]",ps=Ze+"*?",ms=Ze+"+?";class P{type;#t;#e;#r=!1;#n=[];#o;#b;#y;#l=!1;#a;#f;#u=!1;constructor(t,e,s={}){this.type=t,t&&(this.#e=!0),this.#o=e,this.#t=this.#o?this.#o.#t:this,this.#a=this.#t===this?s:this.#t.#a,this.#y=this.#t===this?[]:this.#t.#y,t==="!"&&!this.#t.#l&&this.#y.push(this),this.#b=this.#o?this.#o.#n.length:0}get hasMagic(){if(this.#e!==void 0)return this.#e;for(const t of this.#n)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return this.#f!==void 0?this.#f:this.type?this.#f=this.type+"("+this.#n.map(t=>String(t)).join("|")+")":this.#f=this.#n.map(t=>String(t)).join("")}#h(){if(this!==this.#t)throw new Error("should only call on root");if(this.#l)return this;this.toString(),this.#l=!0;let t;for(;t=this.#y.pop();){if(t.type!=="!")continue;let e=t,s=e.#o;for(;s;){for(let n=e.#b+1;!s.type&&n<s.#n.length;n++)for(const r of t.#n){if(typeof r=="string")throw new Error("string part in extglob AST??");r.copyIn(s.#n[n])}e=s,s=e.#o}}return this}push(...t){for(const e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof P&&e.#o===this))throw new Error("invalid part: "+e);this.#n.push(e)}}toJSON(){const t=this.type===null?this.#n.slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...this.#n.map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#l&&this.#o?.type==="!")&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#o?.isStart())return!1;if(this.#b===0)return!0;const t=this.#o;for(let e=0;e<this.#b;e++){const s=t.#n[e];if(!(s instanceof P&&s.type==="!"))return!1}return!0}isEnd(){if(this.#t===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();const t=this.#o?this.#o.#n.length:0;return this.#b===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){const e=new P(this.type,t);for(const s of this.#n)e.copyIn(s);return e}static#s(t,e,s,n){let r=!1,o=!1,a=-1,h=!1;if(e.type===null){let d=s,m="";for(;d<t.length;){const p=t.charAt(d++);if(r||p==="\\"){r=!r,m+=p;continue}if(o){d===a+1?(p==="^"||p==="!")&&(h=!0):p==="]"&&!(d===a+2&&h)&&(o=!1),m+=p;continue}else if(p==="["){o=!0,a=d,h=!1,m+=p;continue}if(!n.noext&&ds(p)&&t.charAt(d)==="("){e.push(m),m="";const g=new P(p,e);d=P.#s(t,g,d,n),e.push(g);continue}m+=p}return e.push(m),d}let c=s+1,l=new P(null,e);const u=[];let f="";for(;c<t.length;){const d=t.charAt(c++);if(r||d==="\\"){r=!r,f+=d;continue}if(o){c===a+1?(d==="^"||d==="!")&&(h=!0):d==="]"&&!(c===a+2&&h)&&(o=!1),f+=d;continue}else if(d==="["){o=!0,a=c,h=!1,f+=d;continue}if(ds(d)&&t.charAt(c)==="("){l.push(f),f="";const m=new P(d,l);l.push(m),c=P.#s(t,m,c,n);continue}if(d==="|"){l.push(f),f="",u.push(l),l=new P(null,e);continue}if(d===")")return f===""&&e.#n.length===0&&(e.#u=!0),l.push(f),f="",e.push(...u,l),c;f+=d}return e.type=null,e.#e=void 0,e.#n=[t.substring(s-1)],c}static fromGlob(t,e={}){const s=new P(null,void 0,e);return P.#s(t,s,0,e),s}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString(),[e,s,n,r]=this.toRegExpSource();if(!(n||this.#e||this.#a.nocase&&!this.#a.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;const a=(this.#a.nocase?"i":"")+(r?"u":"");return Object.assign(new RegExp(`^${e}$`,a),{_src:e,_glob:t})}get options(){return this.#a}toRegExpSource(t){const e=t??!!this.#a.dot;if(this.#t===this&&this.#h(),!this.type){const h=this.isStart()&&this.isEnd()&&!this.#n.some(d=>typeof d!="string"),c=this.#n.map(d=>{const[m,p,g,w]=typeof d=="string"?P.#S(d,this.#e,h):d.toRegExpSource(t);return this.#e=this.#e||g,this.#r=this.#r||w,m}).join("");let l="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&yr.has(this.#n[0]))){const m=wr,p=e&&m.has(c.charAt(0))||c.startsWith("\\.")&&m.has(c.charAt(2))||c.startsWith("\\.\\.")&&m.has(c.charAt(4)),g=!e&&!t&&m.has(c.charAt(0));l=p?gr:g?qt:""}let u="";return this.isEnd()&&this.#t.#l&&this.#o?.type==="!"&&(u="(?:$|\\/)"),[l+c+u,vt(c),this.#e=!!this.#e,this.#r]}const s=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:";let r=this.#p(e);if(this.isStart()&&this.isEnd()&&!r&&this.type!=="!"){const h=this.toString();return this.#n=[h],this.type=null,this.#e=void 0,[h,vt(this.toString()),!1,!1]}let o=!s||t||e||!qt?"":this.#p(!0);o===r&&(o=""),o&&(r=`(?:${r})(?:${o})*?`);let a="";if(this.type==="!"&&this.#u)a=(this.isStart()&&!e?qt:"")+ms;else{const h=this.type==="!"?"))"+(this.isStart()&&!e&&!t?qt:"")+ps+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=n+r+h}return[a,vt(r),this.#e=!!this.#e,this.#r]}#p(t){return this.#n.map(e=>{if(typeof e=="string")throw new Error("string type in extglob ast??");const[s,n,r,o]=e.toRegExpSource(t);return this.#r=this.#r||o,s}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join("|")}static#S(t,e,s=!1){let n=!1,r="",o=!1;for(let a=0;a<t.length;a++){const h=t.charAt(a);if(n){n=!1,r+=(vr.has(h)?"\\":"")+h;continue}if(h==="\\"){a===t.length-1?r+="\\\\":n=!0;continue}if(h==="["){const[c,l,u,f]=pr(t,a);if(u){r+=c,o=o||l,a+=u-1,e=e||f;continue}}if(h==="*"){r+=s&&t==="*"?ms:ps,e=!0;continue}if(h==="?"){r+=Ze,e=!0;continue}r+=br(h)}return[r,vt(t),!!e,o]}}const hi=(i,{windowsPathsNoEscape:t=!1,magicalBraces:e=!1}={})=>e?t?i.replace(/[?*()[\]{}]/g,"[$&]"):i.replace(/[?*()[\]\\{}]/g,"\\$&"):t?i.replace(/[?*()[\]]/g,"[$&]"):i.replace(/[?*()[\]\\]/g,"\\$&"),D=(i,t,e={})=>(oe(t),!e.nocomment&&t.charAt(0)==="#"?!1:new ot(t,e).match(i)),Sr=/^\*+([^+@!?\*\[\(]*)$/,Er=i=>t=>!t.startsWith(".")&&t.endsWith(i),xr=i=>t=>t.endsWith(i),Cr=i=>(i=i.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(i)),Or=i=>(i=i.toLowerCase(),t=>t.toLowerCase().endsWith(i)),$r=/^\*+\.\*+$/,Tr=i=>!i.startsWith(".")&&i.includes("."),Ar=i=>i!=="."&&i!==".."&&i.includes("."),jr=/^\.\*+$/,Rr=i=>i!=="."&&i!==".."&&i.startsWith("."),kr=/^\*+$/,Pr=i=>i.length!==0&&!i.startsWith("."),Mr=i=>i.length!==0&&i!=="."&&i!=="..",Dr=/^\?+([^+@!?\*\[\(]*)?$/,_r=([i,t=""])=>{const e=ci([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Fr=([i,t=""])=>{const e=li([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Lr=([i,t=""])=>{const e=li([i]);return t?s=>e(s)&&s.endsWith(t):e},Ir=([i,t=""])=>{const e=ci([i]);return t?s=>e(s)&&s.endsWith(t):e},ci=([i])=>{const t=i.length;return e=>e.length===t&&!e.startsWith(".")},li=([i])=>{const t=i.length;return e=>e.length===t&&e!=="."&&e!==".."},ui=typeof E=="object"&&E?typeof $e=="object"&&$e&&$e.__MINIMATCH_TESTING_PLATFORM__||E.platform:"posix",gs={win32:{sep:"\\"},posix:{sep:"/"}},Nr=ui==="win32"?gs.win32.sep:gs.posix.sep;D.sep=Nr;const M=Symbol("globstar **");D.GLOBSTAR=M;const Wr="[^/]",zr=Wr+"*?",Br="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ur="(?:(?!(?:\\/|^)\\.).)*?",Gr=(i,t={})=>e=>D(e,i,t);D.filter=Gr;const I=(i,t={})=>Object.assign({},i,t),qr=i=>{if(!i||typeof i!="object"||!Object.keys(i).length)return D;const t=D;return Object.assign((s,n,r={})=>t(s,n,I(i,r)),{Minimatch:class extends t.Minimatch{constructor(n,r={}){super(n,I(i,r))}static defaults(n){return t.defaults(I(i,n)).Minimatch}},AST:class extends t.AST{constructor(n,r,o={}){super(n,r,I(i,o))}static fromGlob(n,r={}){return t.AST.fromGlob(n,I(i,r))}},unescape:(s,n={})=>t.unescape(s,I(i,n)),escape:(s,n={})=>t.escape(s,I(i,n)),filter:(s,n={})=>t.filter(s,I(i,n)),defaults:s=>t.defaults(I(i,s)),makeRe:(s,n={})=>t.makeRe(s,I(i,n)),braceExpand:(s,n={})=>t.braceExpand(s,I(i,n)),match:(s,n,r={})=>t.match(s,n,I(i,r)),sep:t.sep,GLOBSTAR:M})};D.defaults=qr;const fi=(i,t={})=>(oe(i),t.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:or(i));D.braceExpand=fi;const Hr=(i,t={})=>new ot(i,t).makeRe();D.makeRe=Hr;const Vr=(i,t,e={})=>{const s=new ot(t,e);return i=i.filter(n=>s.match(n)),s.options.nonull&&!i.length&&i.push(t),i};D.match=Vr;const ws=/[?*]|[+@!]\(.*?\)|\[|\]/,Kr=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class ot{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){oe(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||ui,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,this.globSet);const s=this.globSet.map(r=>this.slashSplit(r));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let n=this.globParts.map((r,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const h=r[0]===""&&r[1]===""&&(r[2]==="?"||!ws.test(r[2]))&&!ws.test(r[3]),c=/^[a-z]:/i.test(r[0]);if(h)return[...r.slice(0,4),...r.slice(4).map(l=>this.parse(l))];if(c)return[r[0],...r.slice(1).map(l=>this.parse(l))]}return r.map(h=>this.parse(h))});if(this.debug(this.pattern,n),this.set=n.filter(r=>r.indexOf(!1)===-1),this.isWindows)for(let r=0;r<this.set.length;r++){const o=this.set[r];o[0]===""&&o[1]===""&&this.globParts[r][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let s=0;s<t.length;s++)for(let n=0;n<t[s].length;n++)t[s][n]==="**"&&(t[s][n]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let s=-1;for(;(s=e.indexOf("**",s+1))!==-1;){let n=s;for(;e[n+1]==="**";)n++;n!==s&&e.splice(s,n-s)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((s,n)=>{const r=s[s.length-1];return n==="**"&&r==="**"?s:n===".."&&r&&r!==".."&&r!=="."&&r!=="**"?(s.pop(),s):(s.push(n),s)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let n=1;n<t.length-1;n++){const r=t[n];n===1&&r===""&&t[0]===""||(r==="."||r==="")&&(e=!0,t.splice(n,1),n--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let s=0;for(;(s=t.indexOf("..",s+1))!==-1;){const n=t[s-1];n&&n!=="."&&n!==".."&&n!=="**"&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let n=-1;for(;(n=s.indexOf("**",n+1))!==-1;){let o=n;for(;s[o+1]==="**";)o++;o>n&&s.splice(n+1,o-n);let a=s[n+1];const h=s[n+2],c=s[n+3];if(a!==".."||!h||h==="."||h===".."||!c||c==="."||c==="..")continue;e=!0,s.splice(n,1);const l=s.slice(0);l[n]="**",t.push(l),n--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){const a=s[o];o===1&&a===""&&s[0]===""||(a==="."||a==="")&&(e=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(e=!0,s.pop())}let r=0;for(;(r=s.indexOf("..",r+1))!==-1;){const o=s[r-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;const h=r===1&&s[r+1]==="**"?["."]:[];s.splice(r-1,2,...h),s.length===0&&s.push(""),r-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){const n=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);if(n){t[e]=[],t[s]=n;break}}return t.filter(e=>e.length)}partsMatch(t,e,s=!1){let n=0,r=0,o=[],a="";for(;n<t.length&&r<e.length;)if(t[n]===e[r])o.push(a==="b"?e[r]:t[n]),n++,r++;else if(s&&t[n]==="**"&&e[r]===t[n+1])o.push(t[n]),n++;else if(s&&e[r]==="**"&&t[n]===e[r+1])o.push(e[r]),r++;else if(t[n]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="b")return!1;a="a",o.push(t[n]),n++,r++}else if(e[r]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(a==="a")return!1;a="b",o.push(e[r]),n++,r++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,s=0;for(let n=0;n<t.length&&t.charAt(n)==="!";n++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){const n=this.options;if(this.isWindows){const p=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),g=!p&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),b=g?3:p?0:void 0,v=y?3:w?0:void 0;if(typeof b=="number"&&typeof v=="number"){const[S,$]=[t[b],e[v]];S.toLowerCase()===$.toLowerCase()&&(e[v]=S,v>b?e=e.slice(v):b>v&&(t=t.slice(b)))}}const{optimizationLevel:r=1}=this.options;r>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,a=0,h=t.length,c=e.length;o<h&&a<c;o++,a++){this.debug("matchOne loop");var l=e[a],u=t[o];if(this.debug(e,l,u),l===!1)return!1;if(l===M){this.debug("GLOBSTAR",[e,l,u]);var f=o,d=a+1;if(d===c){for(this.debug("** at the end");o<h;o++)if(t[o]==="."||t[o]===".."||!n.dot&&t[o].charAt(0)===".")return!1;return!0}for(;f<h;){var m=t[f];if(this.debug(`
globstar while`,t,f,e,d,m),this.matchOne(t.slice(f),e.slice(d),s))return this.debug("globstar found match!",f,h,m),!0;if(m==="."||m===".."||!n.dot&&m.charAt(0)==="."){this.debug("dot detected!",t,f,e,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(s&&(this.debug(`
>>> no match, partial?`,t,f,e,d),f===h))}let p;if(typeof l=="string"?(p=u===l,this.debug("string match",l,u,p)):(p=l.test(u),this.debug("pattern match",l,u,p)),!p)return!1}if(o===h&&a===c)return!0;if(o===h)return s;if(a===c)return o===h-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return fi(this.pattern,this.options)}parse(t){oe(t);const e=this.options;if(t==="**")return M;if(t==="")return"";let s,n=null;(s=t.match(kr))?n=e.dot?Mr:Pr:(s=t.match(Sr))?n=(e.nocase?e.dot?Or:Cr:e.dot?xr:Er)(s[1]):(s=t.match(Dr))?n=(e.nocase?e.dot?Fr:_r:e.dot?Lr:Ir)(s):(s=t.match($r))?n=e.dot?Ar:Tr:(s=t.match(jr))&&(n=Rr);const r=P.fromGlob(t,this.options).toMMPattern();return n&&typeof r=="object"&&Reflect.defineProperty(r,"test",{value:n}),r}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,s=e.noglobstar?zr:e.dot?Br:Ur,n=new Set(e.nocase?["i"]:[]);let r=t.map(h=>{const c=h.map(u=>{if(u instanceof RegExp)for(const f of u.flags.split(""))n.add(f);return typeof u=="string"?Kr(u):u===M?M:u._src});c.forEach((u,f)=>{const d=c[f+1],m=c[f-1];u!==M||m===M||(m===void 0?d!==void 0&&d!==M?c[f+1]="(?:\\/|"+s+"\\/)?"+d:c[f]=s:d===void 0?c[f-1]=m+"(?:\\/|\\/"+s+")?":d!==M&&(c[f-1]=m+"(?:\\/|\\/"+s+"\\/)"+d,c[f+1]=M))});const l=c.filter(u=>u!==M);if(this.partial&&l.length>=1){const u=[];for(let f=1;f<=l.length;f++)u.push(l.slice(0,f).join("/"));return"(?:"+u.join("|")+")"}return l.join("/")}).join("|");const[o,a]=t.length>1?["(?:",")"]:["",""];r="^"+o+r+a+"$",this.partial&&(r="^(?:\\/|"+o+r.slice(1,-1)+a+")$"),this.negate&&(r="^(?!"+r+").+$");try{this.regexp=new RegExp(r,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;const s=this.options;this.isWindows&&(t=t.split("\\").join("/"));const n=this.slashSplit(t);this.debug(this.pattern,"split",n);const r=this.set;this.debug(this.pattern,"set",r);let o=n[n.length-1];if(!o)for(let a=n.length-2;!o&&a>=0;a--)o=n[a];for(let a=0;a<r.length;a++){const h=r[a];let c=n;if(s.matchBase&&h.length===1&&(c=[o]),this.matchOne(c,h,e))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(t){return D.defaults(t).Minimatch}}D.AST=P;D.Minimatch=ot;D.escape=hi;D.unescape=vt;const Jr=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,di=new Set,qe=typeof E=="object"&&E?E:{},pi=(i,t,e,s)=>{typeof qe.emitWarning=="function"?qe.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)};let ae=globalThis.AbortController,ys=globalThis.AbortSignal;if(typeof ae>"u"){ys=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,n){this._onabort.push(n)}},ae=class{constructor(){t()}signal=new ys;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(const n of this.signal._onabort)n(s);this.signal.onabort?.(s)}}};let i=qe.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const t=()=>{i&&(i=!1,pi("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const Yr=i=>!di.has(i),it=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),mi=i=>it(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?te:null:null;class te extends Array{constructor(t){super(t),this.fill(0)}}class bt{heap;length;static#t=!1;static create(t){const e=mi(t);if(!e)return[];bt.#t=!0;const s=new bt(t,e);return bt.#t=!1,s}constructor(t,e){if(!bt.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class Ct{#t;#e;#r;#n;#o;#b;#y;#l;get perf(){return this.#l}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#f;#u;#h;#s;#p;#S;#v;#m;#A;#g;#x;#$;#w;#E;#T;#d;#i;static unsafeExposeInternals(t){return{starts:t.#$,ttls:t.#w,sizes:t.#x,keyMap:t.#u,keyList:t.#h,valList:t.#s,next:t.#p,prev:t.#S,get head(){return t.#v},get tail(){return t.#m},free:t.#A,isBackgroundFetch:e=>t.#c(e),backgroundFetch:(e,s,n,r)=>t.#U(e,s,n,r),moveToTail:e=>t.#L(e),indexes:e=>t.#R(e),rindexes:e=>t.#P(e),isStale:e=>t.#O(e)}}get max(){return this.#t}get maxSize(){return this.#e}get calculatedSize(){return this.#f}get size(){return this.#a}get fetchMethod(){return this.#b}get memoMethod(){return this.#y}get dispose(){return this.#r}get onInsert(){return this.#n}get disposeAfter(){return this.#o}constructor(t){const{max:e=0,ttl:s,ttlResolution:n=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:h,dispose:c,onInsert:l,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:d,maxSize:m=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:w,memoMethod:y,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:$,ignoreFetchAbort:V,perf:Gt}=t;if(Gt!==void 0&&typeof Gt?.now!="function")throw new TypeError("perf option must have a now() method if specified");if(this.#l=Gt??Jr,e!==0&&!it(e))throw new TypeError("max option must be a nonnegative integer");const dt=e?mi(e):Array;if(!dt)throw new Error("invalid max value: "+e);if(this.#t=e,this.#e=m,this.maxEntrySize=p||this.#e,this.sizeCalculation=g,this.sizeCalculation){if(!this.#e&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#y=y,w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#b=w,this.#T=!!w,this.#u=new Map,this.#h=new Array(e).fill(void 0),this.#s=new Array(e).fill(void 0),this.#p=new dt(e),this.#S=new dt(e),this.#v=0,this.#m=0,this.#A=bt.create(e),this.#a=0,this.#f=0,typeof c=="function"&&(this.#r=c),typeof l=="function"&&(this.#n=l),typeof u=="function"?(this.#o=u,this.#g=[]):(this.#o=void 0,this.#g=void 0),this.#E=!!this.#r,this.#i=!!this.#n,this.#d=!!this.#o,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!b,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!$,this.ignoreFetchAbort=!!V,this.maxEntrySize!==0){if(this.#e!==0&&!it(this.#e))throw new TypeError("maxSize must be a positive integer if specified");if(!it(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#I()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=it(n)||n===0?n:1,this.ttlAutopurge=!!r,this.ttl=s||0,this.ttl){if(!it(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#t===0&&this.ttl===0&&this.#e===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#e){const pt="LRU_CACHE_UNBOUNDED";Yr(pt)&&(di.add(pt),pi("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",pt,Ct))}}getRemainingTTL(t){return this.#u.has(t)?1/0:0}#M(){const t=new te(this.#t),e=new te(this.#t);this.#w=t,this.#$=e,this.#z=(r,o,a=this.#l.now())=>{if(e[r]=o!==0?a:0,t[r]=o,o!==0&&this.ttlAutopurge){const h=setTimeout(()=>{this.#O(r)&&this.#k(this.#h[r],"expire")},o+1);h.unref&&h.unref()}},this.#j=r=>{e[r]=t[r]!==0?this.#l.now():0},this.#C=(r,o)=>{if(t[o]){const a=t[o],h=e[o];if(!a||!h)return;r.ttl=a,r.start=h,r.now=s||n();const c=r.now-h;r.remainingTTL=a-c}};let s=0;const n=()=>{const r=this.#l.now();if(this.ttlResolution>0){s=r;const o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return r};this.getRemainingTTL=r=>{const o=this.#u.get(r);if(o===void 0)return 0;const a=t[o],h=e[o];if(!a||!h)return 1/0;const c=(s||n())-h;return a-c},this.#O=r=>{const o=e[r],a=t[r];return!!a&&!!o&&(s||n())-o>a}}#j=()=>{};#C=()=>{};#z=()=>{};#O=()=>!1;#I(){const t=new te(this.#t);this.#f=0,this.#x=t,this.#D=e=>{this.#f-=t[e],t[e]=0},this.#_=(e,s,n,r)=>{if(this.#c(s))return 0;if(!it(n))if(r){if(typeof r!="function")throw new TypeError("sizeCalculation must be a function");if(n=r(s,e),!it(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#N=(e,s,n)=>{if(t[e]=s,this.#e){const r=this.#e-t[e];for(;this.#f>r;)this.#F(!0)}this.#f+=t[e],n&&(n.entrySize=s,n.totalCalculatedSize=this.#f)}}#D=t=>{};#N=(t,e,s)=>{};#_=(t,e,s,n)=>{if(s||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#R({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#m;!(!this.#B(e)||((t||!this.#O(e))&&(yield e),e===this.#v));)e=this.#S[e]}*#P({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#v;!(!this.#B(e)||((t||!this.#O(e))&&(yield e),e===this.#m));)e=this.#p[e]}#B(t){return t!==void 0&&this.#u.get(this.#h[t])===t}*entries(){for(const t of this.#R())this.#s[t]!==void 0&&this.#h[t]!==void 0&&!this.#c(this.#s[t])&&(yield[this.#h[t],this.#s[t]])}*rentries(){for(const t of this.#P())this.#s[t]!==void 0&&this.#h[t]!==void 0&&!this.#c(this.#s[t])&&(yield[this.#h[t],this.#s[t]])}*keys(){for(const t of this.#R()){const e=this.#h[t];e!==void 0&&!this.#c(this.#s[t])&&(yield e)}}*rkeys(){for(const t of this.#P()){const e=this.#h[t];e!==void 0&&!this.#c(this.#s[t])&&(yield e)}}*values(){for(const t of this.#R())this.#s[t]!==void 0&&!this.#c(this.#s[t])&&(yield this.#s[t])}*rvalues(){for(const t of this.#P())this.#s[t]!==void 0&&!this.#c(this.#s[t])&&(yield this.#s[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const s of this.#R()){const n=this.#s[s],r=this.#c(n)?n.__staleWhileFetching:n;if(r!==void 0&&t(r,this.#h[s],this))return this.get(this.#h[s],e)}}forEach(t,e=this){for(const s of this.#R()){const n=this.#s[s],r=this.#c(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#h[s],this)}}rforEach(t,e=this){for(const s of this.#P()){const n=this.#s[s],r=this.#c(n)?n.__staleWhileFetching:n;r!==void 0&&t.call(e,r,this.#h[s],this)}}purgeStale(){let t=!1;for(const e of this.#P({allowStale:!0}))this.#O(e)&&(this.#k(this.#h[e],"expire"),t=!0);return t}info(t){const e=this.#u.get(t);if(e===void 0)return;const s=this.#s[e],n=this.#c(s)?s.__staleWhileFetching:s;if(n===void 0)return;const r={value:n};if(this.#w&&this.#$){const o=this.#w[e],a=this.#$[e];if(o&&a){const h=o-(this.#l.now()-a);r.ttl=h,r.start=Date.now()}}return this.#x&&(r.size=this.#x[e]),r}dump(){const t=[];for(const e of this.#R({allowStale:!0})){const s=this.#h[e],n=this.#s[e],r=this.#c(n)?n.__staleWhileFetching:n;if(r===void 0||s===void 0)continue;const o={value:r};if(this.#w&&this.#$){o.ttl=this.#w[e];const a=this.#l.now()-this.#$[e];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[e]),t.unshift([s,o])}return t}load(t){this.clear();for(const[e,s]of t){if(s.start){const n=Date.now()-s.start;s.start=this.#l.now()-n}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;const{ttl:n=this.ttl,start:r,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:h}=s;let{noUpdateTTL:c=this.noUpdateTTL}=s;const l=this.#_(t,e,s.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.#k(t,"set"),this;let u=this.#a===0?void 0:this.#u.get(t);if(u===void 0)u=this.#a===0?this.#m:this.#A.length!==0?this.#A.pop():this.#a===this.#t?this.#F(!1):this.#a,this.#h[u]=t,this.#s[u]=e,this.#u.set(t,u),this.#p[this.#m]=u,this.#S[u]=this.#m,this.#m=u,this.#a++,this.#N(u,l,h),h&&(h.set="add"),c=!1,this.#i&&this.#n?.(e,t,"add");else{this.#L(u);const f=this.#s[u];if(e!==f){if(this.#T&&this.#c(f)){f.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:d}=f;d!==void 0&&!o&&(this.#E&&this.#r?.(d,t,"set"),this.#d&&this.#g?.push([d,t,"set"]))}else o||(this.#E&&this.#r?.(f,t,"set"),this.#d&&this.#g?.push([f,t,"set"]));if(this.#D(u),this.#N(u,l,h),this.#s[u]=e,h){h.set="replace";const d=f&&this.#c(f)?f.__staleWhileFetching:f;d!==void 0&&(h.oldValue=d)}}else h&&(h.set="update");this.#i&&this.onInsert?.(e,t,e===f?"update":"replace")}if(n!==0&&!this.#w&&this.#M(),this.#w&&(c||this.#z(u,n,r),h&&this.#C(h,u)),!o&&this.#d&&this.#g){const f=this.#g;let d;for(;d=f?.shift();)this.#o?.(...d)}return this}pop(){try{for(;this.#a;){const t=this.#s[this.#v];if(this.#F(!0),this.#c(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#d&&this.#g){const t=this.#g;let e;for(;e=t?.shift();)this.#o?.(...e)}}}#F(t){const e=this.#v,s=this.#h[e],n=this.#s[e];return this.#T&&this.#c(n)?n.__abortController.abort(new Error("evicted")):(this.#E||this.#d)&&(this.#E&&this.#r?.(n,s,"evict"),this.#d&&this.#g?.push([n,s,"evict"])),this.#D(e),t&&(this.#h[e]=void 0,this.#s[e]=void 0,this.#A.push(e)),this.#a===1?(this.#v=this.#m=0,this.#A.length=0):this.#v=this.#p[e],this.#u.delete(s),this.#a--,e}has(t,e={}){const{updateAgeOnHas:s=this.updateAgeOnHas,status:n}=e,r=this.#u.get(t);if(r!==void 0){const o=this.#s[r];if(this.#c(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#O(r))n&&(n.has="stale",this.#C(n,r));else return s&&this.#j(r),n&&(n.has="hit",this.#C(n,r)),!0}else n&&(n.has="miss");return!1}peek(t,e={}){const{allowStale:s=this.allowStale}=e,n=this.#u.get(t);if(n===void 0||!s&&this.#O(n))return;const r=this.#s[n];return this.#c(r)?r.__staleWhileFetching:r}#U(t,e,s,n){const r=e===void 0?void 0:this.#s[e];if(this.#c(r))return r;const o=new ae,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const h={signal:o.signal,options:s,context:n},c=(p,g=!1)=>{const{aborted:w}=o.signal,y=s.ignoreFetchAbort&&p!==void 0;if(s.status&&(w&&!g?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,y&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),w&&!y&&!g)return u(o.signal.reason);const b=d,v=this.#s[e];return(v===d||y&&g&&v===void 0)&&(p===void 0?b.__staleWhileFetching!==void 0?this.#s[e]=b.__staleWhileFetching:this.#k(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,p,h.options))),p},l=p=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=p),u(p)),u=p=>{const{aborted:g}=o.signal,w=g&&s.allowStaleOnFetchAbort,y=w||s.allowStaleOnFetchRejection,b=y||s.noDeleteOnFetchRejection,v=d;if(this.#s[e]===d&&(!b||v.__staleWhileFetching===void 0?this.#k(t,"fetch"):w||(this.#s[e]=v.__staleWhileFetching)),y)return s.status&&v.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),v.__staleWhileFetching;if(v.__returned===v)throw p},f=(p,g)=>{const w=this.#b?.(t,r,h);w&&w instanceof Promise&&w.then(y=>p(y===void 0?void 0:y),g),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(p(void 0),s.allowStaleOnFetchAbort&&(p=y=>c(y,!0)))})};s.status&&(s.status.fetchDispatched=!0);const d=new Promise(f).then(c,l),m=Object.assign(d,{__abortController:o,__staleWhileFetching:r,__returned:void 0});return e===void 0?(this.set(t,m,{...h.options,status:void 0}),e=this.#u.get(t)):this.#s[e]=m,m}#c(t){if(!this.#T)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof ae}async fetch(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:h=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:w,signal:y}=e;if(!this.#T)return w&&(w.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:r,status:w});const b={allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:r,ttl:o,noDisposeOnSet:a,size:h,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:m,ignoreFetchAbort:d,status:w,signal:y};let v=this.#u.get(t);if(v===void 0){w&&(w.fetch="miss");const S=this.#U(t,v,b,p);return S.__returned=S}else{const S=this.#s[v];if(this.#c(S)){const pt=s&&S.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",pt&&(w.returnedStale=!0)),pt?S.__staleWhileFetching:S.__returned=S}const $=this.#O(v);if(!g&&!$)return w&&(w.fetch="hit"),this.#L(v),n&&this.#j(v),w&&this.#C(w,v),S;const V=this.#U(t,v,b,p),dt=V.__staleWhileFetching!==void 0&&s;return w&&(w.fetch=$?"stale":"refresh",dt&&$&&(w.returnedStale=!0)),dt?V.__staleWhileFetching:V.__returned=V}}async forceFetch(t,e={}){const s=await this.fetch(t,e);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,e={}){const s=this.#y;if(!s)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:r,...o}=e,a=this.get(t,o);if(!r&&a!==void 0)return a;const h=s(t,a,{options:o,context:n});return this.set(t,h,o),h}get(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:o}=e,a=this.#u.get(t);if(a!==void 0){const h=this.#s[a],c=this.#c(h);return o&&this.#C(o,a),this.#O(a)?(o&&(o.get="stale"),c?(o&&s&&h.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?h.__staleWhileFetching:void 0):(r||this.#k(t,"expire"),o&&s&&(o.returnedStale=!0),s?h:void 0)):(o&&(o.get="hit"),c?h.__staleWhileFetching:(this.#L(a),n&&this.#j(a),h))}else o&&(o.get="miss")}#G(t,e){this.#S[e]=t,this.#p[t]=e}#L(t){t!==this.#m&&(t===this.#v?this.#v=this.#p[t]:this.#G(this.#S[t],this.#p[t]),this.#G(this.#m,t),this.#m=t)}delete(t){return this.#k(t,"delete")}#k(t,e){let s=!1;if(this.#a!==0){const n=this.#u.get(t);if(n!==void 0)if(s=!0,this.#a===1)this.#W(e);else{this.#D(n);const r=this.#s[n];if(this.#c(r)?r.__abortController.abort(new Error("deleted")):(this.#E||this.#d)&&(this.#E&&this.#r?.(r,t,e),this.#d&&this.#g?.push([r,t,e])),this.#u.delete(t),this.#h[n]=void 0,this.#s[n]=void 0,n===this.#m)this.#m=this.#S[n];else if(n===this.#v)this.#v=this.#p[n];else{const o=this.#S[n];this.#p[o]=this.#p[n];const a=this.#p[n];this.#S[a]=this.#S[n]}this.#a--,this.#A.push(n)}}if(this.#d&&this.#g?.length){const n=this.#g;let r;for(;r=n?.shift();)this.#o?.(...r)}return s}clear(){return this.#W("delete")}#W(t){for(const e of this.#P({allowStale:!0})){const s=this.#s[e];if(this.#c(s))s.__abortController.abort(new Error("deleted"));else{const n=this.#h[e];this.#E&&this.#r?.(s,n,t),this.#d&&this.#g?.push([s,n,t])}}if(this.#u.clear(),this.#s.fill(void 0),this.#h.fill(void 0),this.#w&&this.#$&&(this.#w.fill(0),this.#$.fill(0)),this.#x&&this.#x.fill(0),this.#v=0,this.#m=0,this.#A.length=0,this.#f=0,this.#a=0,this.#d&&this.#g){const e=this.#g;let s;for(;s=e?.shift();)this.#o?.(...s)}}}const vs=typeof E=="object"&&E?E:{stdout:null,stderr:null},Zr=i=>!!i&&typeof i=="object"&&(i instanceof he||i instanceof Us||Xr(i)||Qr(i)),Xr=i=>!!i&&typeof i=="object"&&i instanceof Ke.EventEmitter&&typeof i.pipe=="function"&&i.pipe!==Us.Writable.prototype.pipe,Qr=i=>!!i&&typeof i=="object"&&i instanceof Ke.EventEmitter&&typeof i.write=="function"&&typeof i.end=="function",Q=Symbol("EOF"),tt=Symbol("maybeEmitEnd"),st=Symbol("emittedEnd"),Ht=Symbol("emittingEnd"),$t=Symbol("emittedError"),Vt=Symbol("closed"),bs=Symbol("read"),Kt=Symbol("flush"),Ss=Symbol("flushChunk"),z=Symbol("encoding"),mt=Symbol("decoder"),T=Symbol("flowing"),Tt=Symbol("paused"),wt=Symbol("resume"),A=Symbol("buffer"),k=Symbol("pipes"),j=Symbol("bufferLength"),Ae=Symbol("bufferPush"),Jt=Symbol("bufferShift"),R=Symbol("objectMode"),x=Symbol("destroyed"),je=Symbol("error"),Re=Symbol("emitData"),Es=Symbol("emitEnd"),ke=Symbol("emitEnd2"),K=Symbol("async"),Pe=Symbol("abort"),Yt=Symbol("aborted"),At=Symbol("signal"),at=Symbol("dataListeners"),L=Symbol("discarded"),jt=i=>Promise.resolve().then(i),to=i=>i(),eo=i=>i==="end"||i==="finish"||i==="prefinish",so=i=>i instanceof ArrayBuffer||!!i&&typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,io=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i);class gi{src;dest;opts;ondrain;constructor(t,e,s){this.src=t,this.dest=e,this.opts=s,this.ondrain=()=>t[wt](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class no extends gi{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,s){super(t,e,s),this.proxyErrors=n=>e.emit("error",n),t.on("error",this.proxyErrors)}}const ro=i=>!!i.objectMode,oo=i=>!i.objectMode&&!!i.encoding&&i.encoding!=="buffer";class he extends Ke.EventEmitter{[T]=!1;[Tt]=!1;[k]=[];[A]=[];[R];[z];[K];[mt];[Q]=!1;[st]=!1;[Ht]=!1;[Vt]=!1;[$t]=null;[j]=0;[x]=!1;[At];[Yt]=!1;[at]=0;[L]=!1;writable=!0;readable=!0;constructor(...t){const e=t[0]||{};if(super(),e.objectMode&&typeof e.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");ro(e)?(this[R]=!0,this[z]=null):oo(e)?(this[z]=e.encoding,this[R]=!1):(this[R]=!1,this[z]=null),this[K]=!!e.async,this[mt]=this[z]?new Yi(this[z]):null,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[A]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[k]});const{signal:s}=e;s&&(this[At]=s,s.aborted?this[Pe]():s.addEventListener("abort",()=>this[Pe]()))}get bufferLength(){return this[j]}get encoding(){return this[z]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[R]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[K]}set async(t){this[K]=this[K]||!!t}[Pe](){this[Yt]=!0,this.emit("abort",this[At]?.reason),this.destroy(this[At]?.reason)}get aborted(){return this[Yt]}set aborted(t){}write(t,e,s){if(this[Yt])return!1;if(this[Q])throw new Error("write after end");if(this[x])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(s=e,e="utf8"),e||(e="utf8");const n=this[K]?jt:to;if(!this[R]&&!Buffer.isBuffer(t)){if(io(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(so(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[R]?(this[T]&&this[j]!==0&&this[Kt](!0),this[T]?this.emit("data",t):this[Ae](t),this[j]!==0&&this.emit("readable"),s&&n(s),this[T]):t.length?(typeof t=="string"&&!(e===this[z]&&!this[mt]?.lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[z]&&(t=this[mt].write(t)),this[T]&&this[j]!==0&&this[Kt](!0),this[T]?this.emit("data",t):this[Ae](t),this[j]!==0&&this.emit("readable"),s&&n(s),this[T]):(this[j]!==0&&this.emit("readable"),s&&n(s),this[T])}read(t){if(this[x])return null;if(this[L]=!1,this[j]===0||t===0||t&&t>this[j])return this[tt](),null;this[R]&&(t=null),this[A].length>1&&!this[R]&&(this[A]=[this[z]?this[A].join(""):Buffer.concat(this[A],this[j])]);const e=this[bs](t||null,this[A][0]);return this[tt](),e}[bs](t,e){if(this[R])this[Jt]();else{const s=e;t===s.length||t===null?this[Jt]():typeof s=="string"?(this[A][0]=s.slice(t),e=s.slice(0,t),this[j]-=t):(this[A][0]=s.subarray(t),e=s.subarray(0,t),this[j]-=t)}return this.emit("data",e),!this[A].length&&!this[Q]&&this.emit("drain"),e}end(t,e,s){return typeof t=="function"&&(s=t,t=void 0),typeof e=="function"&&(s=e,e="utf8"),t!==void 0&&this.write(t,e),s&&this.once("end",s),this[Q]=!0,this.writable=!1,(this[T]||!this[Tt])&&this[tt](),this}[wt](){this[x]||(!this[at]&&!this[k].length&&(this[L]=!0),this[Tt]=!1,this[T]=!0,this.emit("resume"),this[A].length?this[Kt]():this[Q]?this[tt]():this.emit("drain"))}resume(){return this[wt]()}pause(){this[T]=!1,this[Tt]=!0,this[L]=!1}get destroyed(){return this[x]}get flowing(){return this[T]}get paused(){return this[Tt]}[Ae](t){this[R]?this[j]+=1:this[j]+=t.length,this[A].push(t)}[Jt](){return this[R]?this[j]-=1:this[j]-=this[A][0].length,this[A].shift()}[Kt](t=!1){do;while(this[Ss](this[Jt]())&&this[A].length);!t&&!this[A].length&&!this[Q]&&this.emit("drain")}[Ss](t){return this.emit("data",t),this[T]}pipe(t,e){if(this[x])return t;this[L]=!1;const s=this[st];return e=e||{},t===vs.stdout||t===vs.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,s?e.end&&t.end():(this[k].push(e.proxyErrors?new no(this,t,e):new gi(this,t,e)),this[K]?jt(()=>this[wt]()):this[wt]()),t}unpipe(t){const e=this[k].find(s=>s.dest===t);e&&(this[k].length===1?(this[T]&&this[at]===0&&(this[T]=!1),this[k]=[]):this[k].splice(this[k].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){const s=super.on(t,e);if(t==="data")this[L]=!1,this[at]++,!this[k].length&&!this[T]&&this[wt]();else if(t==="readable"&&this[j]!==0)super.emit("readable");else if(eo(t)&&this[st])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[$t]){const n=e;this[K]?jt(()=>n.call(this,this[$t])):n.call(this,this[$t])}return s}removeListener(t,e){return this.off(t,e)}off(t,e){const s=super.off(t,e);return t==="data"&&(this[at]=this.listeners("data").length,this[at]===0&&!this[L]&&!this[k].length&&(this[T]=!1)),s}removeAllListeners(t){const e=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[at]=0,!this[L]&&!this[k].length&&(this[T]=!1)),e}get emittedEnd(){return this[st]}[tt](){!this[Ht]&&!this[st]&&!this[x]&&this[A].length===0&&this[Q]&&(this[Ht]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Vt]&&this.emit("close"),this[Ht]=!1)}emit(t,...e){const s=e[0];if(t!=="error"&&t!=="close"&&t!==x&&this[x])return!1;if(t==="data")return!this[R]&&!s?!1:this[K]?(jt(()=>this[Re](s)),!0):this[Re](s);if(t==="end")return this[Es]();if(t==="close"){if(this[Vt]=!0,!this[st]&&!this[x])return!1;const r=super.emit("close");return this.removeAllListeners("close"),r}else if(t==="error"){this[$t]=s,super.emit(je,s);const r=!this[At]||this.listeners("error").length?super.emit("error",s):!1;return this[tt](),r}else if(t==="resume"){const r=super.emit("resume");return this[tt](),r}else if(t==="finish"||t==="prefinish"){const r=super.emit(t);return this.removeAllListeners(t),r}const n=super.emit(t,...e);return this[tt](),n}[Re](t){for(const s of this[k])s.dest.write(t)===!1&&this.pause();const e=this[L]?!1:super.emit("data",t);return this[tt](),e}[Es](){return this[st]?!1:(this[st]=!0,this.readable=!1,this[K]?(jt(()=>this[ke]()),!0):this[ke]())}[ke](){if(this[mt]){const e=this[mt].end();if(e){for(const s of this[k])s.dest.write(e);this[L]||super.emit("data",e)}}for(const e of this[k])e.end();const t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){const t=Object.assign([],{dataLength:0});this[R]||(t.dataLength=0);const e=this.promise();return this.on("data",s=>{t.push(s),this[R]||(t.dataLength+=s.length)}),await e,t}async concat(){if(this[R])throw new Error("cannot concat in objectMode");const t=await this.collect();return this[z]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,e)=>{this.on(x,()=>e(new Error("stream destroyed"))),this.on("error",s=>e(s)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[L]=!1;let t=!1;const e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();const n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Q])return e();let r,o;const a=u=>{this.off("data",h),this.off("end",c),this.off(x,l),e(),o(u)},h=u=>{this.off("error",a),this.off("end",c),this.off(x,l),this.pause(),r({value:u,done:!!this[Q]})},c=()=>{this.off("error",a),this.off("data",h),this.off(x,l),e(),r({done:!0,value:void 0})},l=()=>a(new Error("stream destroyed"));return new Promise((u,f)=>{o=f,r=u,this.once(x,l),this.once("error",a),this.once("end",c),this.once("data",h)})},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[L]=!1;let t=!1;const e=()=>(this.pause(),this.off(je,e),this.off(x,e),this.off("end",e),t=!0,{done:!0,value:void 0}),s=()=>{if(t)return e();const n=this.read();return n===null?e():{done:!1,value:n}};return this.once("end",e),this.once(je,e),this.once(x,e),{next:s,throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[x])return t?this.emit("error",t):this.emit(x),this;this[x]=!0,this[L]=!0,this[A].length=0,this[j]=0;const e=this;return typeof e.close=="function"&&!this[Vt]&&e.close(),t?this.emit("error",t):this.emit(x),this}static get isStream(){return Zr}}const ao=zi.native,Mt={lstatSync:Ji,readdir:Ki,readdirSync:Vi,readlinkSync:Hi,realpathSync:ao,promises:{lstat:qi,readdir:Gi,readlink:Ui,realpath:Bi}},wi=i=>!i||i===Mt||i===Zi?Mt:{...Mt,...i,promises:{...Mt.promises,...i.promises||{}}},yi=/^\\\\\?\\([a-z]:)\\?$/i,ho=i=>i.replace(/\//g,"\\").replace(yi,"$1\\"),co=/[\\\/]/,W=0,vi=1,bi=2,Y=4,Si=6,Ei=8,ht=10,xi=12,N=15,Rt=~N,Me=16,xs=32,Dt=64,B=128,Zt=256,ee=512,Cs=Dt|B|ee,lo=1023,De=i=>i.isFile()?Ei:i.isDirectory()?Y:i.isSymbolicLink()?ht:i.isCharacterDevice()?bi:i.isBlockDevice()?Si:i.isSocket()?xi:i.isFIFO()?vi:W,Os=new Ct({max:2**12}),_t=i=>{const t=Os.get(i);if(t)return t;const e=i.normalize("NFKD");return Os.set(i,e),e},$s=new Ct({max:2**12}),Xt=i=>{const t=$s.get(i);if(t)return t;const e=_t(i.toLowerCase());return $s.set(i,e),e};class Ts extends Ct{constructor(){super({max:256})}}class uo extends Ct{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}}const Ci=Symbol("PathScurry setAsCwd");class _{name;root;roots;parent;nocase;isCWD=!1;#t;#e;get dev(){return this.#e}#r;get mode(){return this.#r}#n;get nlink(){return this.#n}#o;get uid(){return this.#o}#b;get gid(){return this.#b}#y;get rdev(){return this.#y}#l;get blksize(){return this.#l}#a;get ino(){return this.#a}#f;get size(){return this.#f}#u;get blocks(){return this.#u}#h;get atimeMs(){return this.#h}#s;get mtimeMs(){return this.#s}#p;get ctimeMs(){return this.#p}#S;get birthtimeMs(){return this.#S}#v;get atime(){return this.#v}#m;get mtime(){return this.#m}#A;get ctime(){return this.#A}#g;get birthtime(){return this.#g}#x;#$;#w;#E;#T;#d;#i;#M;#j;#C;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=W,s,n,r,o,a){this.name=t,this.#x=r?Xt(t):_t(t),this.#i=e&lo,this.nocase=r,this.roots=n,this.root=s||this,this.#M=o,this.#w=a.fullpath,this.#T=a.relative,this.#d=a.relativePosix,this.parent=a.parent,this.parent?this.#t=this.parent.#t:this.#t=wi(a.fs)}depth(){return this.#$!==void 0?this.#$:this.parent?this.#$=this.parent.depth()+1:this.#$=0}childrenCache(){return this.#M}resolve(t){if(!t)return this;const e=this.getRootString(t),n=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#z(n):this.#z(n)}#z(t){let e=this;for(const s of t)e=e.child(s);return e}children(){const t=this.#M.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#M.set(this,e),this.#i&=~Me,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;const s=this.children(),n=this.nocase?Xt(t):_t(t);for(const h of s)if(h.#x===n)return h;const r=this.parent?this.sep:"",o=this.#w?this.#w+r+t:void 0,a=this.newChild(t,W,{...e,parent:this,fullpath:o});return this.canReaddir()||(a.#i|=B),s.push(a),a}relative(){if(this.isCWD)return"";if(this.#T!==void 0)return this.#T;const t=this.name,e=this.parent;if(!e)return this.#T=this.name;const s=e.relative();return s+(!s||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#d!==void 0)return this.#d;const t=this.name,e=this.parent;if(!e)return this.#d=this.fullpathPosix();const s=e.relativePosix();return s+(!s||!e.parent?"":"/")+t}fullpath(){if(this.#w!==void 0)return this.#w;const t=this.name,e=this.parent;if(!e)return this.#w=this.name;const n=e.fullpath()+(e.parent?this.sep:"")+t;return this.#w=n}fullpathPosix(){if(this.#E!==void 0)return this.#E;if(this.sep==="/")return this.#E=this.fullpath();if(!this.parent){const n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#E=`//?/${n}`:this.#E=n}const t=this.parent,e=t.fullpathPosix(),s=e+(!e||!t.parent?"":"/")+this.name;return this.#E=s}isUnknown(){return(this.#i&N)===W}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#i&N)===Ei}isDirectory(){return(this.#i&N)===Y}isCharacterDevice(){return(this.#i&N)===bi}isBlockDevice(){return(this.#i&N)===Si}isFIFO(){return(this.#i&N)===vi}isSocket(){return(this.#i&N)===xi}isSymbolicLink(){return(this.#i&ht)===ht}lstatCached(){return this.#i&xs?this:void 0}readlinkCached(){return this.#j}realpathCached(){return this.#C}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#j)return!0;if(!this.parent)return!1;const t=this.#i&N;return!(t!==W&&t!==ht||this.#i&Zt||this.#i&B)}calledReaddir(){return!!(this.#i&Me)}isENOENT(){return!!(this.#i&B)}isNamed(t){return this.nocase?this.#x===Xt(t):this.#x===_t(t)}async readlink(){const t=this.#j;if(t)return t;if(this.canReadlink()&&this.parent)try{const e=await this.#t.promises.readlink(this.fullpath()),s=(await this.parent.realpath())?.resolve(e);if(s)return this.#j=s}catch(e){this.#B(e.code);return}}readlinkSync(){const t=this.#j;if(t)return t;if(this.canReadlink()&&this.parent)try{const e=this.#t.readlinkSync(this.fullpath()),s=this.parent.realpathSync()?.resolve(e);if(s)return this.#j=s}catch(e){this.#B(e.code);return}}#O(t){this.#i|=Me;for(let e=t.provisional;e<t.length;e++){const s=t[e];s&&s.#I()}}#I(){this.#i&B||(this.#i=(this.#i|B)&Rt,this.#D())}#D(){const t=this.children();t.provisional=0;for(const e of t)e.#I()}#N(){this.#i|=ee,this.#_()}#_(){if(this.#i&Dt)return;let t=this.#i;(t&N)===Y&&(t&=Rt),this.#i=t|Dt,this.#D()}#R(t=""){t==="ENOTDIR"||t==="EPERM"?this.#_():t==="ENOENT"?this.#I():this.children().provisional=0}#P(t=""){t==="ENOTDIR"?this.parent.#_():t==="ENOENT"&&this.#I()}#B(t=""){let e=this.#i;e|=Zt,t==="ENOENT"&&(e|=B),(t==="EINVAL"||t==="UNKNOWN")&&(e&=Rt),this.#i=e,t==="ENOTDIR"&&this.parent&&this.parent.#_()}#F(t,e){return this.#c(t,e)||this.#U(t,e)}#U(t,e){const s=De(t),n=this.newChild(t.name,s,{parent:this}),r=n.#i&N;return r!==Y&&r!==ht&&r!==W&&(n.#i|=Dt),e.unshift(n),e.provisional++,n}#c(t,e){for(let s=e.provisional;s<e.length;s++){const n=e[s];if((this.nocase?Xt(t.name):_t(t.name))===n.#x)return this.#G(t,n,s,e)}}#G(t,e,s,n){const r=e.name;return e.#i=e.#i&Rt|De(t),r!==t.name&&(e.name=t.name),s!==n.provisional&&(s===n.length-1?n.pop():n.splice(s,1),n.unshift(e)),n.provisional++,e}async lstat(){if((this.#i&B)===0)try{return this.#L(await this.#t.promises.lstat(this.fullpath())),this}catch(t){this.#P(t.code)}}lstatSync(){if((this.#i&B)===0)try{return this.#L(this.#t.lstatSync(this.fullpath())),this}catch(t){this.#P(t.code)}}#L(t){const{atime:e,atimeMs:s,birthtime:n,birthtimeMs:r,blksize:o,blocks:a,ctime:h,ctimeMs:c,dev:l,gid:u,ino:f,mode:d,mtime:m,mtimeMs:p,nlink:g,rdev:w,size:y,uid:b}=t;this.#v=e,this.#h=s,this.#g=n,this.#S=r,this.#l=o,this.#u=a,this.#A=h,this.#p=c,this.#e=l,this.#b=u,this.#a=f,this.#r=d,this.#m=m,this.#s=p,this.#n=g,this.#y=w,this.#f=y,this.#o=b;const v=De(t);this.#i=this.#i&Rt|v|xs,v!==W&&v!==Y&&v!==ht&&(this.#i|=Dt)}#k=[];#W=!1;#H(t){this.#W=!1;const e=this.#k.slice();this.#k.length=0,e.forEach(s=>s(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}const s=this.children();if(this.calledReaddir()){const r=s.slice(0,s.provisional);e?t(null,r):queueMicrotask(()=>t(null,r));return}if(this.#k.push(t),this.#W)return;this.#W=!0;const n=this.fullpath();this.#t.readdir(n,{withFileTypes:!0},(r,o)=>{if(r)this.#R(r.code),s.provisional=0;else{for(const a of o)this.#F(a,s);this.#O(s)}this.#H(s.slice(0,s.provisional))})}#q;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#q)await this.#q;else{let s=()=>{};this.#q=new Promise(n=>s=n);try{for(const n of await this.#t.promises.readdir(e,{withFileTypes:!0}))this.#F(n,t);this.#O(t)}catch(n){this.#R(n.code),t.provisional=0}this.#q=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const s of this.#t.readdirSync(e,{withFileTypes:!0}))this.#F(s,t);this.#O(t)}catch(s){this.#R(s.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#i&Cs)return!1;const t=N&this.#i;return t===W||t===Y||t===ht}shouldWalk(t,e){return(this.#i&Y)===Y&&!(this.#i&Cs)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#C)return this.#C;if(!((ee|Zt|B)&this.#i))try{const t=await this.#t.promises.realpath(this.fullpath());return this.#C=this.resolve(t)}catch{this.#N()}}realpathSync(){if(this.#C)return this.#C;if(!((ee|Zt|B)&this.#i))try{const t=this.#t.realpathSync(this.fullpath());return this.#C=this.resolve(t)}catch{this.#N()}}[Ci](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;const e=new Set([]);let s=[],n=this;for(;n&&n.parent;)e.add(n),n.#T=s.join(this.sep),n.#d=s.join("/"),n=n.parent,s.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#T=void 0,n.#d=void 0,n=n.parent}}class pe extends _{sep="\\";splitSep=co;constructor(t,e=W,s,n,r,o,a){super(t,e,s,n,r,o,a)}newChild(t,e=W,s={}){return new pe(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return Ie.parse(t).root}getRoot(t){if(t=ho(t.toUpperCase()),t===this.root.name)return this.root;for(const[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new Xe(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(yi,"$1\\"),t===e}}class me extends _{splitSep="/";sep="/";constructor(t,e=W,s,n,r,o,a){super(t,e,s,n,r,o,a)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=W,s={}){return new me(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}}class Oi{root;rootPath;roots;cwd;#t;#e;#r;nocase;#n;constructor(t=E.cwd(),e,s,{nocase:n,childrenCacheSize:r=16*1024,fs:o=Mt}={}){this.#n=wi(o),(t instanceof URL||t.startsWith("file://"))&&(t=Bs(t));const a=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#t=new Ts,this.#e=new Ts,this.#r=new uo(r);const h=a.substring(this.rootPath.length).split(s);if(h.length===1&&!h[0]&&h.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let c=this.root,l=h.length-1;const u=e.sep;let f=this.rootPath,d=!1;for(const m of h){const p=l--;c=c.child(m,{relative:new Array(p).fill("..").join(u),relativePosix:new Array(p).fill("..").join("/"),fullpath:f+=(d?"":u)+m}),d=!0}this.cwd=c}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#r}resolve(...t){let e="";for(let r=t.length-1;r>=0;r--){const o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}const s=this.#t.get(e);if(s!==void 0)return s;const n=this.cwd.resolve(e).fullpath();return this.#t.set(e,n),n}resolvePosix(...t){let e="";for(let r=t.length-1;r>=0;r--){const o=t[r];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}const s=this.#e.get(e);if(s!==void 0)return s;const n=this.cwd.resolve(e).fullpathPosix();return this.#e.set(e,n),n}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s}=e;if(t.canReaddir()){const n=await t.readdir();return s?n:n.map(r=>r.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map(n=>n.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t.withFileTypes,t=this.cwd);const s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t.withFileTypes,t=this.cwd);const s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t.withFileTypes,t=this.cwd);const s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t.withFileTypes,t=this.cwd);const s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(s?t:t.fullpath());const h=new Set,c=(u,f)=>{h.add(u),u.readdirCB((d,m)=>{if(d)return f(d);let p=m.length;if(!p)return f();const g=()=>{--p===0&&f()};for(const w of m)(!r||r(w))&&a.push(s?w:w.fullpath()),n&&w.isSymbolicLink()?w.realpath().then(y=>y?.isUnknown()?y.lstat():y).then(y=>y?.shouldWalk(h,o)?c(y,g):g()):w.shouldWalk(h,o)?c(w,g):g()},!0)},l=t;return new Promise((u,f)=>{c(l,d=>{if(d)return f(d);u(a)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=[];(!r||r(t))&&a.push(s?t:t.fullpath());const h=new Set([t]);for(const c of h){const l=c.readdirSync();for(const u of l){(!r||r(u))&&a.push(s?u:u.fullpath());let f=u;if(u.isSymbolicLink()){if(!(n&&(f=u.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(h,o)&&h.add(f)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e;(!r||r(t))&&(yield s?t:t.fullpath());const a=new Set([t]);for(const h of a){const c=h.readdirSync();for(const l of c){(!r||r(l))&&(yield s?l:l.fullpath());let u=l;if(l.isSymbolicLink()){if(!(n&&(u=l.realpathSync())))continue;u.isUnknown()&&u.lstatSync()}u.shouldWalk(a,o)&&a.add(u)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new he({objectMode:!0});(!r||r(t))&&a.write(s?t:t.fullpath());const h=new Set,c=[t];let l=0;const u=()=>{let f=!1;for(;!f;){const d=c.shift();if(!d){l===0&&a.end();return}l++,h.add(d);const m=(g,w,y=!1)=>{if(g)return a.emit("error",g);if(n&&!y){const b=[];for(const v of w)v.isSymbolicLink()&&b.push(v.realpath().then(S=>S?.isUnknown()?S.lstat():S));if(b.length){Promise.all(b).then(()=>m(null,w,!0));return}}for(const b of w)b&&(!r||r(b))&&(a.write(s?b:b.fullpath())||(f=!0));l--;for(const b of w){const v=b.realpathCached()||b;v.shouldWalk(h,o)&&c.push(v)}f&&!a.flowing?a.once("drain",u):p||u()};let p=!0;d.readdirCB(m,!0),p=!1}};return u(),a}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof _||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:r,walkFilter:o}=e,a=new he({objectMode:!0}),h=new Set;(!r||r(t))&&a.write(s?t:t.fullpath());const c=[t];let l=0;const u=()=>{let f=!1;for(;!f;){const d=c.shift();if(!d){l===0&&a.end();return}l++,h.add(d);const m=d.readdirSync();for(const p of m)(!r||r(p))&&(a.write(s?p:p.fullpath())||(f=!0));l--;for(const p of m){let g=p;if(p.isSymbolicLink()){if(!(n&&(g=p.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(h,o)&&c.push(g)}}f&&!a.flowing&&a.once("drain",u)};return u(),a}chdir(t=this.cwd){const e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[Ci](e)}}class Xe extends Oi{sep="\\";constructor(t=E.cwd(),e={}){const{nocase:s=!0}=e;super(t,Ie,"\\",{...e,nocase:s}),this.nocase=s;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(t){return Ie.parse(t).root.toUpperCase()}newRoot(t){return new pe(this.rootPath,Y,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}class Qe extends Oi{sep="/";constructor(t=E.cwd(),e={}){const{nocase:s=!1}=e;super(t,zs,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new me(this.rootPath,Y,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}class $i extends Qe{constructor(t=E.cwd(),e={}){const{nocase:s=!0}=e;super(t,{...e,nocase:s})}}E.platform;const fo=E.platform==="win32"?Xe:E.platform==="darwin"?$i:Qe,po=i=>i.length>=1,mo=i=>i.length>=1;class ge{#t;#e;#r;length;#n;#o;#b;#y;#l;#a;#f=!0;constructor(t,e,s,n){if(!po(t))throw new TypeError("empty pattern list");if(!mo(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#t=t,this.#e=e,this.#r=s,this.#n=n,this.#r===0){if(this.isUNC()){const[r,o,a,h,...c]=this.#t,[l,u,f,d,...m]=this.#e;c[0]===""&&(c.shift(),m.shift());const p=[r,o,a,h,""].join("/"),g=[l,u,f,d,""].join("/");this.#t=[p,...c],this.#e=[g,...m],this.length=this.#t.length}else if(this.isDrive()||this.isAbsolute()){const[r,...o]=this.#t,[a,...h]=this.#e;o[0]===""&&(o.shift(),h.shift());const c=r+"/",l=a+"/";this.#t=[c,...o],this.#e=[l,...h],this.length=this.#t.length}}}pattern(){return this.#t[this.#r]}isString(){return typeof this.#t[this.#r]=="string"}isGlobstar(){return this.#t[this.#r]===M}isRegExp(){return this.#t[this.#r]instanceof RegExp}globString(){return this.#b=this.#b||(this.#r===0?this.isAbsolute()?this.#e[0]+this.#e.slice(1).join("/"):this.#e.join("/"):this.#e.slice(this.#r).join("/"))}hasMore(){return this.length>this.#r+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new ge(this.#t,this.#e,this.#r+1,this.#n),this.#o.#a=this.#a,this.#o.#l=this.#l,this.#o.#y=this.#y,this.#o):this.#o=null}isUNC(){const t=this.#t;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#r===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){const t=this.#t;return this.#y!==void 0?this.#y:this.#y=this.#n==="win32"&&this.#r===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#t;return this.#a!==void 0?this.#a:this.#a=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#t[0];return typeof t=="string"&&this.isAbsolute()&&this.#r===0?t:""}checkFollowGlobstar(){return!(this.#r===0||!this.isGlobstar()||!this.#f)}markFollowGlobstar(){return this.#r===0||!this.isGlobstar()||!this.#f?!1:(this.#f=!1,!0)}}const go=typeof E=="object"&&E&&typeof E.platform=="string"?E.platform:"linux";class As{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:s,noext:n,noglobstar:r,platform:o=go}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:e,nocase:s,noext:n,noglobstar:r,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(const a of t)this.add(a)}add(t){const e=new ot(t,this.mmopts);for(let s=0;s<e.set.length;s++){const n=e.set[s],r=e.globParts[s];if(!n||!r)throw new Error("invalid pattern object");for(;n[0]==="."&&r[0]===".";)n.shift(),r.shift();const o=new ge(n,r,0,this.platform),a=new ot(o.globString(),this.mmopts),h=r[r.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),h&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(t){const e=t.fullpath(),s=`${e}/`,n=t.relative()||".",r=`${n}/`;for(const o of this.relative)if(o.match(n)||o.match(r))return!0;for(const o of this.absolute)if(o.match(e)||o.match(s))return!0;return!1}childrenIgnored(t){const e=t.fullpath()+"/",s=(t.relative()||".")+"/";for(const n of this.relativeChildren)if(n.match(s))return!0;for(const n of this.absoluteChildren)if(n.match(e))return!0;return!1}}class ts{store;constructor(t=new Map){this.store=t}copy(){return new ts(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){const s=t.fullpath(),n=this.store.get(s);n?n.add(e.globString()):this.store.set(s,new Set([e.globString()]))}}class wo{store=new Map;add(t,e,s){const n=(e?2:0)|(s?1:0),r=this.store.get(t);this.store.set(t,r===void 0?n:n&r)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}}class yo{store=new Map;add(t,e){if(!t.canReaddir())return;const s=this.store.get(t);s?s.find(n=>n.globString()===e.globString())||s.push(e):this.store.set(t,[e])}get(t){const e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}}class ce{hasWalkedCache;matches=new wo;subwalks=new yo;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new ts}processPatterns(t,e){this.patterns=e;const s=e.map(n=>[t,n]);for(let[n,r]of s){this.hasWalkedCache.storeWalked(n,r);const o=r.root(),a=r.isAbsolute()&&this.opts.absolute!==!1;if(o){n=n.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);const u=r.rest();if(u)r=u;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let h,c,l=!1;for(;typeof(h=r.pattern())=="string"&&(c=r.rest());)n=n.resolve(h),r=c,l=!0;if(h=r.pattern(),c=r.rest(),l){if(this.hasWalkedCache.hasWalked(n,r))continue;this.hasWalkedCache.storeWalked(n,r)}if(typeof h=="string"){const u=h===".."||h===""||h===".";this.matches.add(n.resolve(h),a,u);continue}else if(h===M){(!n.isSymbolicLink()||this.follow||r.checkFollowGlobstar())&&this.subwalks.add(n,r);const u=c?.pattern(),f=c?.rest();if(!c||(u===""||u===".")&&!f)this.matches.add(n,a,u===""||u===".");else if(u===".."){const d=n.parent||n;f?this.hasWalkedCache.hasWalked(d,f)||this.subwalks.add(d,f):this.matches.add(d,a,!0)}}else h instanceof RegExp&&this.subwalks.add(n,r)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new ce(this.opts,this.hasWalkedCache)}filterEntries(t,e){const s=this.subwalks.get(t),n=this.child();for(const r of e)for(const o of s){const a=o.isAbsolute(),h=o.pattern(),c=o.rest();h===M?n.testGlobstar(r,o,c,a):h instanceof RegExp?n.testRegExp(r,h,c,a):n.testString(r,h,c,a)}return n}testGlobstar(t,e,s,n){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(s&&e.checkFollowGlobstar()?this.subwalks.add(t,s):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),s){const r=s.pattern();if(typeof r=="string"&&r!==".."&&r!==""&&r!==".")this.testString(t,r,s.rest(),n);else if(r===".."){const o=t.parent||t;this.subwalks.add(o,s)}else r instanceof RegExp&&this.testRegExp(t,r,s.rest(),n)}}testRegExp(t,e,s,n){e.test(t.name)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}testString(t,e,s,n){t.isNamed(e)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}}const vo=(i,t)=>typeof i=="string"?new As([i],t):Array.isArray(i)?new As(i,t):i;class Ti{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#t=[];#e;#r;signal;maxDepth;includeChildMatches;constructor(t,e,s){if(this.patterns=t,this.path=e,this.opts=s,this.#r=!s.posix&&s.platform==="win32"?"\\":"/",this.includeChildMatches=s.includeChildMatches!==!1,(s.ignore||!this.includeChildMatches)&&(this.#e=vo(s.ignore??[],s),!this.includeChildMatches&&typeof this.#e.add!="function")){const n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=s.maxDepth||1/0,s.signal&&(this.signal=s.signal,this.signal.addEventListener("abort",()=>{this.#t.length=0}))}#n(t){return this.seen.has(t)||!!this.#e?.ignored?.(t)}#o(t){return!!this.#e?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#t.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#t.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||await t.realpath(),!s)return;t=s}const r=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){const o=await r.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(r,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!t.isSymbolicLink()||!t.realpathCached()?.isDirectory())&&!this.#n(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||t.realpathSync(),!s)return;t=s}const r=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&r?.isSymbolicLink()){const o=r.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(r,e)}matchFinish(t,e){if(this.#n(t))return;if(!this.includeChildMatches&&this.#e?.add){const r=`${t.relativePosix()}/**`;this.#e.add(r)}const s=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);const n=this.opts.mark&&t.isDirectory()?this.#r:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(s){const r=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(r+n)}else{const r=this.opts.posix?t.relativePosix():t.relative(),o=this.opts.dotRelative&&!r.startsWith(".."+this.#r)?"."+this.#r:"";this.matchEmit(r?o+r+n:"."+n)}}async match(t,e,s){const n=await this.matchCheck(t,s);n&&this.matchFinish(n,e)}matchSync(t,e,s){const n=this.matchCheckSync(t,s);n&&this.matchFinish(n,e)}walkCB(t,e,s){this.signal?.aborted&&s(),this.walkCB2(t,e,new ce(this.opts),s)}walkCB2(t,e,s,n){if(this.#o(t))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(t,e,s,n));return}s.processPatterns(t,e);let r=1;const o=()=>{--r===0&&n()};for(const[a,h,c]of s.matches.entries())this.#n(a)||(r++,this.match(a,h,c).then(()=>o()));for(const a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;r++;const h=a.readdirCached();a.calledReaddir()?this.walkCB3(a,h,s,o):a.readdirCB((c,l)=>this.walkCB3(a,l,s,o),!0)}o()}walkCB3(t,e,s,n){s=s.filterEntries(t,e);let r=1;const o=()=>{--r===0&&n()};for(const[a,h,c]of s.matches.entries())this.#n(a)||(r++,this.match(a,h,c).then(()=>o()));for(const[a,h]of s.subwalks.entries())r++,this.walkCB2(a,h,s.child(),o);o()}walkCBSync(t,e,s){this.signal?.aborted&&s(),this.walkCB2Sync(t,e,new ce(this.opts),s)}walkCB2Sync(t,e,s,n){if(this.#o(t))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,s,n));return}s.processPatterns(t,e);let r=1;const o=()=>{--r===0&&n()};for(const[a,h,c]of s.matches.entries())this.#n(a)||this.matchSync(a,h,c);for(const a of s.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;r++;const h=a.readdirSync();this.walkCB3Sync(a,h,s,o)}o()}walkCB3Sync(t,e,s,n){s=s.filterEntries(t,e);let r=1;const o=()=>{--r===0&&n()};for(const[a,h,c]of s.matches.entries())this.#n(a)||this.matchSync(a,h,c);for(const[a,h]of s.subwalks.entries())r++,this.walkCB2Sync(a,h,s.child(),o);o()}}class js extends Ti{matches=new Set;constructor(t,e,s){super(t,e,s)}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((t,e)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}}class Rs extends Ti{results;constructor(t,e,s){super(t,e,s),this.results=new he({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){const t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}const bo=typeof E=="object"&&E&&typeof E.platform=="string"?E.platform:"linux";class ft{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=Bs(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=e.includeChildMatches!==!1,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(h=>h.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(h=>h.includes("/")?h:`./**/${h}`)}if(this.pattern=t,this.platform=e.platform||bo,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const h=e.platform==="win32"?Xe:e.platform==="darwin"?$i:e.platform?Qe:fo;this.scurry=new h(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;const s=this.platform==="darwin"||this.platform==="win32",n={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},r=this.pattern.map(h=>new ot(h,n)),[o,a]=r.reduce((h,c)=>(h[0].push(...c.set),h[1].push(...c.globParts),h),[[],[]]);this.patterns=o.map((h,c)=>{const l=a[c];if(!l)throw new Error("invalid pattern object");return new ge(h,l,0,this.platform)})}async walk(){return[...await new js(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new js(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Rs(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Rs(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}const So=(i,t={})=>{Array.isArray(i)||(i=[i]);for(const e of i)if(new ot(e,t).hasMagic())return!0;return!1};function we(i,t={}){return new ft(i,t).streamSync()}function Ai(i,t={}){return new ft(i,t).stream()}function ji(i,t={}){return new ft(i,t).walkSync()}async function ks(i,t={}){return new ft(i,t).walk()}function ye(i,t={}){return new ft(i,t).iterateSync()}function Ri(i,t={}){return new ft(i,t).iterate()}const Eo=we,xo=Object.assign(Ai,{sync:we}),Co=ye,Oo=Object.assign(Ri,{sync:ye}),$o=Object.assign(ji,{stream:we,iterate:ye}),Ps=Object.assign(ks,{glob:ks,globSync:ji,sync:$o,globStream:Ai,stream:xo,globStreamSync:we,streamSync:Eo,globIterate:Ri,iterate:Oo,globIterateSync:ye,iterateSync:Co,Glob:ft,hasMagic:So,escape:hi,unescape:vt});Ps.glob=Ps;const{join:Ms,normalize:To}=zs,Ao=i=>({factory:t,visitChildren:e,currentNode:s})=>C.ts.isImportDeclaration(s)&&C.ts.isStringLiteral(s.moduleSpecifier)&&s.moduleSpecifier.text==="pardon"?t.createImportDeclaration(s.modifiers,s.importClause,s.moduleSpecifier,t.createImportAttributes(t.createNodeArray([t.createImportAttribute(t.createIdentifier("parent"),t.createStringLiteral(i)),...s.attributes?.elements??[]]))):s.kind===C.ts.SyntaxKind.SourceFile?e():s,jo=i=>({factory:t,visitChildren:e,currentNode:s})=>{if(!i)return s;if(C.ts.isImportDeclaration(s)||C.ts.isExportDeclaration(s)){if(!s.moduleSpecifier||!C.ts.isStringLiteral(s.moduleSpecifier)||!s.moduleSpecifier.text.startsWith("pardon:"))return e();if(C.ts.isImportDeclaration(s))return t.createImportDeclaration(s.modifiers,s.importClause,s.moduleSpecifier,t.createImportAttributes(t.createNodeArray([t.createImportAttribute(t.createIdentifier("identity"),t.createStringLiteral(i)),...s.attributes?.elements??[]])));if(!s.isTypeOnly)return t.createExportDeclaration(s.modifiers,!1,s.exportClause,s.moduleSpecifier,t.createImportAttributes(t.createNodeArray([t.createImportAttribute(t.createIdentifier("identity"),t.createStringLiteral(i))])))}return e()};function Ro({collection:{data:i,scripts:t}}){const e=new C.Project({compilerOptions:{outDir:"memory",module:C.ts.ModuleKind.ES2022,target:C.ts.ScriptTarget.ES2022,lib:["lib.es2022.d.ts"],allowJs:!0,noCheck:!0,strict:!1,rootDir:"/",noEmitOnError:!0,inlineSourceMap:!0},useInMemoryFileSystem:!0});s.cache={};function s(a,h){if(s.cache[a])return s.cache[a];const c=t.identities[a],l=e.createSourceFile(a,h,{scriptKind:a.endsWith(".js")?C.ts.ScriptKind.JS:C.ts.ScriptKind.TS}).transform(tn).transform(Ao(a)).transform(jo(c)).asKind(C.ts.SyntaxKind.SourceFile),u=[...l?.getExportedDeclarations().entries()??[]].filter(([,f])=>f.some(d=>!((d.getSymbol()?.getValueDeclaration()?.getFlags()??C.ts.SymbolFlags.Transient)&C.ts.SymbolFlags.Transient))).map(([f])=>f);return s.cache[a]={compiled:l,exports:u}}return{compile:o,resolveModule:ki,resolve:Wt,import:n};async function n(a,h){const c=Wt(a,h);return await Nn(()=>import(c))}function r(a,h){let[,c,l]=/^([^?]*)(?:[?](.*))?$/.exec(a);if(c.startsWith("file:///")){const f=new URL(c).pathname;if(t.identities[f]){const{identity:d}=h.importAttributes;if(!d)throw new Error("illegal direct import of exported script");if(d!==t.identities[f])throw new Error("improper import of exported script");return{resolution:f,identity:d}}return{resolution:f}}if(!c.startsWith("pardon:"))return{resolution:c};c=c.replace(/[.][tj]s$/,"");const u=t.resolutions[c];if(u)return l?{resolved:u,index:Number(l),identity:c}:{resolved:u,index:u.length,identity:c};throw new G(`${c}: unresolved`)}function o(a,h){if(a in i)return`export default (${Ft.stringify(i[a].values??null)});`;const{resolution:c,resolved:l,identity:u,index:f}=r(a,h);if(c&&!c.startsWith("pardon:")&&!c.endsWith(".https")){const d=Xi();return s(c,d)?.compiled.transform(({currentNode:p,visitChildren:g,factory:w})=>h.importAttributes.parent?C.ts.isPropertyAccessExpression(p)&&C.ts.isMetaProperty(p.expression)&&p.name.text==="parent"?w.createStringLiteral(h.importAttributes.parent):g():p).asKind(C.ts.SyntaxKind.SourceFile)?.getEmitOutput()?.getOutputFiles()[0].getText()}if(l){const d=new Set;return l.slice(0,f).reverse().map(({path:m,content:p})=>({path:m,exports:s(m,p).exports.filter(g=>d.has(g)?!1:d.add(g))})).reverse().map(({path:m,exports:p},g)=>`export { ${p.join(", ")} } from ${Ft.stringify(Qi(m))} with { identity: ${Ft.stringify(`${u}?${g}`)} };`).join(`
`)}throw new Error(`${l}: compiler confused what to do here`)}}function Wt(i,t){return ki(i,t)}function ki(i,t){if(!C.ts.isExternalModuleNameRelative(i))return To(i);if(!t.startsWith("pardon:"))return Ms(t,i);const e=Ms(t.replace("pardon:","__pardon__/"),i);if(C.ts.isExternalModuleNameRelative(e)&&!e.startsWith("__pardon__/"))throw new Error("module cannot escape a collection: "+i+" from "+t);return e.replace("__pardon__/","pardon:")}const{promise:ko,resolution:Da}=_n();function Po(){return ko}function Mo(){const i=[];return{memory:i,learn(t,e){i.push([t,e])},recall(t,...e){const s=i.reduce((n,[r,o])=>(Object.entries(r).every(([a,h])=>t[a]===h)&&Object.assign(n,o),n),{});return e.length===1?s[e[0]]:s}}}function Pi(i){const{secrets:t}=i.environment.app??{};function e(n,...r){return n=Do(n),t?.recall(n,...r)}function s(n){return new Proxy({},{set(r,o,a){if(typeof o!="string")return!1;const h=o==="*"?a:{[o]:a};return t?.learn(n,h),!0},get(r,o){return typeof o!="string"?r[o]:e({...i.environment.contextValues,...i.evaluationScope.resolvedValues(),...n},o)}})}return new Proxy(()=>{},{apply(n,r,o){return s(o[0])},get(n,r){if(r!=="then")return r===Symbol.toPrimitive?()=>{}:typeof r!="string"?n[r]:e({...i.environment.contextValues,...i.evaluationScope.resolvedValues()},r)},set(){return!1}})}function Do(i){return q(q(i,{select:t=>ie(t)}),String)}function _o(i){return q(i,{filter(t,e){return typeof e=="string"||typeof e=="number"},values:String})}function Z({app:i,endpoint:t,values:e={},secrets:s={},runtime:n={},options:r,context:o}){const a=new We({app:i,name:t.configuration.name,config:t.configuration.config,defaults:t.configuration.defaults,input:e,runtime:{false:!1,true:!0,null:null,String,Number,Math,Date,Boolean(h){return h instanceof Number?!!Number(h):!!h},BigInt(h){return h instanceof Number?BigInt(h.source??h):BigInt(h)},...n},resolve(h,{name:c,scoped:l}){return e[c]??s[c]??Mi(c,t?.configuration?.defaults,h)},resolvedDefaults(h){return No(h,t?.configuration?.defaults)},evaluate(h,c){return h==="secrets"&&c.environment.app?.secrets?Pi(c):(c.evaluationScope.imported(h,c),_e(h,t.configuration,i.compiler))},async redact(h,c){if(r?.secrets)return h;if(c){const l=c?.find(Io);if(!l)return h;if(!ie(h)&&!xe(l))return"{{redacted}}";const u=ie(h)&&!xe(l)?dn(l,String(h)):[h];if(!u)return"{{redacted}}";const f=await Promise.all(u.map(async(d,m)=>{const p=l.vars[m],{param:g,redactor:w}=p;if(de(p)||w){if(w)return(await _e(w,t.configuration,i.compiler)??n[w])(d,p.param,h);const y=await _e(`redact$${g}`,t.configuration,i.compiler)??n[`redact$${g}`];return typeof y=="function"?y(d,p.param,h):`{{ @${g??""} }}`}return d}));return xe(l)?f[0]:pn(l,f)}return"{{redacted}}"},async express({source:h,identifier:c,evaluation:l}){return l()},options(h){return r?.[h]},get extendedContext(){const{service:h,action:c,configuration:{name:l}}=t;return{service:h,action:c,endpoint:l}}});return a.choose(a.implied(_o(e),o)),a}function Mi(i,t,e){let s=t?.[i];const n=[i];for(;s&&typeof s=="object";){const[r,...o]=Object.keys(s);if(o.length)throw new Error(`invalid defaults: ${n.join("/")}`);const a=s[r],h=on(e,r)??e.environment.implied({})[r];if(n.push(`${r}=${a?.[String(h)]?h:"default"}`),s=a?.[h??"default"]??a?.default,s===null)return;if(s===void 0){if(e.mode==="render")throw new G(`unresolved default: ${n.join("/")}`);break}}return s}function _e(i,t,e){return Fo(i,t,e,`pardon:${t.path}`)}async function Fo(i,t,e,s){const n=Lo(i,t);if(n){const r=await e.import(n.specifier,s);return n.import==="*"?r:r[n.import]}}function Lo(i,{import:t={}}){for(const[e,s]of Object.entries(t)){if(typeof s=="string"){if(s===i)return{specifier:e,import:"*"};continue}for(const n of s){let[r,o]=n.split(/\s+as\s+/,2);if(o??(o=r),o.trim()===i)return{specifier:e,import:r.trim()}}}return null}function Io(i){return mn(i)&&i.vars.some(de)}function No(i,t){return It(Object.keys(t??{}),e=>{const s=Mi(e,t,i)??null;return typeof s!="object"&&{[e]:s}})}function Wo(i){return Object.entries(i).map(([t,e])=>{switch(!0){case/[/](service|config)[.]yaml$/.test(t):return{type:"config",name:t,id:t.replace(/[/](service|config)[.]yaml$/,""),source:e};case/[.](yaml|json)$/.test(t):{const s=`pardon:${t.replace(/[.](yaml|json)$/,"")}`;return{type:"data",name:t,id:s,source:e}}case/[.](mix(?:in)?)[.](https)$/.test(t):return{type:"mixin",name:t,id:`pardon:${t}`,source:e};case/[.]flow[.]https$/.test(t):return{type:"flow",name:t,id:t.replace(/[.]https$/,""),source:e};case/[.]https$/.test(t):return{type:"endpoint",name:t,id:t.replace(/[.]https$/,""),source:e};case/[.]flow[.][tj]s$/.test(t):return{type:"script",subtype:"flow",name:t,id:`pardon:${t.replace(/[.][tj]s$/,"")}`,source:e};case/[.][tj]s$/.test(t):return{type:"script",name:t,id:`pardon:${t.replace(/[.][tj]s$/,"")}`,source:e};default:return{type:"unknown",name:t,id:t,source:e}}})}function zo(i,t){return i?i.push(t):i=[t],i}function Bo(...i){return i.reduce((t,e)=>Object.assign(t,q(e,(s,n)=>zo(t[n],s))),{})}function Ds(i){switch(i){case"config":return 0;default:return 1}}function Uo(i){const t=i.map(({files:r})=>Wo(r)),e=i.flatMap(({files:r})=>Object.values(r)).reduce((r,{path:o,content:a})=>Object.assign(r,{[o]:a}),{}),s={collections:i,filesystem:e},n={configurations:{},endpoints:{},data:{},mixins:{},assets:{},scripts:{resolutions:{},identities:{}},errors:[]};for(const r of Object.values(Bo(...t.map(o=>It(o,({type:a,id:h,...c})=>({[`${a}:${h}`]:{type:a,id:h,...c}}))))).sort(([{type:o}],[{type:a}])=>Ds(o)-Ds(a))){const{type:o,name:a,id:h}=r[0],c=r.map(({source:l})=>l);switch(n.assets[h]={type:o,sources:c,name:a},o){case"config":Vo({collection:n,source:s,id:h});break;case"endpoint":_i({collection:n,source:s,id:h});break;case"data":Ko({collection:n,id:h});break;case"mixin":Jo({collection:n,id:h});break;case"script":Yo({collection:n,id:h});break}}return Go({collection:n,source:s}),qo(n),n}function Go({collection:i,source:t}){const{endpoints:e,configurations:s,assets:n}=i,r={},o="//fallback/defaults";t.collections.push({root:o,files:r});for(const[a,{name:h}]of Object.entries(s))if(/[/]service[.]yaml$/.test(h)&&!e[[a,"default"].join("/")]){const c=[a,"default"].join("/"),l=`${c}.https`,u=`${o}/${l}`,f=`>>>
ANY //`;r[c]={path:l,content:f},t.filesystem[u]=f,n[c]={name:l,sources:[{path:u,content:f}],type:"endpoint"},_i({collection:i,source:t,id:c})}}function qo({endpoints:i,data:t}){for(const[e,s]of Object.entries(i)){const{defaults:n}=e.split("/").reduce(({path:r,defaults:o},a)=>(r.push(a),{path:r,defaults:xt(o,t[[...r,"defaults"].join("/")]||{})}),{path:[],defaults:{}});s.configuration.defaults=xt(s.configuration.defaults,n)}}function xt(i,t,e={merge:xt,mix:(s,n)=>n??s}){return typeof i=="object"&&typeof t=="object"&&i&&t&&!Array.isArray(i)&&!Array.isArray(t)?{...i,...t,...It(Object.keys(i??{}).filter(s=>(t??{})[s]!==void 0),s=>({[s]:e.merge((i??{})[s],(t??{})[s],e)}))}:typeof i>"u"?t:e.mix(i,t)}function Di(i,t,e,s,n){var r,o,a;if(n?.export){const h=qs(Vs(s),hn(n.path,n.export)),c=(r=t.resolutions)[o=`pardon:${i}`]??(r[o]=[]),l=`pardon:${i}?${c.length}`;if(h in e){if(((a=t.identities)[h]??(a[h]=l))!==l)throw new G(`cannot reidentify ${h} from ${t.identities[h]} to ${l}`);return c.push({path:h,content:e[h]}),!0}}}function Ho(i,t){const e=[],s=[];let n;for(const r of i.split("/")){e.push(r);const o=e.join("/"),a=t[o];a&&(a.type==="service"&&(n=o),s.push(a))}return{service:n,configuration:Ut({name:i,configurations:s,mixing:!1})}}function Vo({collection:{configurations:i,assets:t,scripts:e,errors:s},source:{collections:n,filesystem:r},id:o}){const{name:a}=t[o];i[o]=n.reduce((h,{files:c,root:l})=>{const{content:u,path:f}=c[`${o}/service.yaml`]??c[`${o}/config.yaml`]??{},d=f?Zo({content:u,name:a,path:f},s):void 0,m=[h,d].filter(Boolean);if(m.length===0)return null;const p=Ut({name:a,configurations:m});return!Di(o,e,r,f??qs(l,p.name),p)&&d?.export&&console.warn(`export: could not resolve direct reference to ${d.export} from ${f}`),p},null)}function _i({collection:{configurations:i,assets:t,scripts:e,endpoints:s,errors:n},source:{filesystem:r},id:o}){const{name:a,sources:h}=t[o],{service:c,configuration:{export:l,...u}}=Ho(o,i);s[o]=h.reduce((f,{content:d,path:m})=>{const{steps:p,configuration:g}=ve(m,()=>Hs.parse(d),n,()=>({mode:"merge",configuration:{},steps:[]}));return f.configuration=Ut({name:a.replace(/[.]https$/,""),configurations:[f.configuration,g].filter(Boolean)}),!Di(o,e,r,m,f.configuration)&&g?.export&&console.warn(`export: could not resolve direct reference to ${g.export} from ${m}`),f.layers.push({path:m,steps:p}),f},{service:c,action:o.split("/").slice(-1)[0],configuration:u,layers:[]})}function Ko({collection:{assets:i,data:t,errors:e},id:s}){const{sources:n}=i[s];t[s]=n.reduce((r,{content:o,path:a})=>({values:ve(a,()=>xt(r.values,a.endsWith(".json")?Ft.parse(o):Ks(o)),e,()=>r.values)}),{values:{}})}function Jo({collection:{assets:i,mixins:t,errors:e},id:s}){const{name:n,sources:r}=i[s],[,o]=/[.]mix(?:in)?[.]https$/.exec(n);t[s]=r.reduce((a,{content:h,path:c})=>{const{steps:l,configuration:u}=ve(c,()=>Hs.parse(h,o),e,()=>({configuration:{},mode:o,steps:[]}));return a.configuration=Ut({name:n,configurations:[a.configuration,u].filter(Boolean)}),a.layers.push({path:c,steps:l}),a},{configuration:void 0,layers:[],mode:o})}function Yo({collection:{assets:i,scripts:t},id:e}){var s;const{sources:n}=i[e];if(n.some(({path:r})=>t.identities[r])){n.every(({path:r})=>t.identities[r])||console.warn(`inconsistent usage of script ${e}`);return}for(const{path:r,content:o}of n){const a=(s=t.resolutions)[e]??(s[e]=[]);t.identities[r]=`${e}?${a.length}`,a.push({path:r,content:o})}}function Zo({content:i,name:t,path:e},s){const n=ve(e,()=>Ks(i),s,()=>({})),[,r,o]=/^(.*)[/](service|config)[.]yaml$/.exec(t);return{...n,type:o,name:r,path:e}}function Ut({name:i,configurations:t,mixing:e}){const s=`pardon:${Vs(i)}`;return{...t.filter(Boolean).reduce((r,{config:o,defaults:a,import:h,export:c,mixin:l,type:u})=>({config:an(o,r.config),defaults:e?xt(a??{},r.defaults):xt(r.defaults,a??{}),import:Object.assign({},r.import,q(h||{},{keys:f=>Wt(f,s),values:(f,d)=>{let m=r.import?.[d];return m?(typeof m=="string"?(typeof f=="string"&&(f=[`* as ${f}`]),m=[`* as ${m}`]):Array.isArray(m)&&typeof f=="string"&&(f=[`* as ${f}`]),[...m.filter(p=>!f.includes(p)),...f]):f}})),export:c?Wt(c,s):r.export,mixin:[...Xo(r,l,s),...r.mixin||[]],type:r.type==="service"||u==="service"?"service":"config"}),{config:[{}],defaults:{},import:{},mixin:[]}),name:i,path:s}}function Xo(i,t,e){return[t||[]].flat(1).map(s=>Wt(s,e)).filter(s=>![i.mixin].filter(Boolean).flat(1).includes(s))}function ve(i,t,e,s){try{return t()}catch(n){return console.warn(`${i}: error loading`,n),e.push({path:i,error:new G(`${i}: error loading`,n)}),s()??(()=>{throw n})()}}var Qo=Object.defineProperty,ta=(i,t,e)=>t in i?Qo(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,kt=(i,t,e)=>ta(i,typeof t!="symbol"?t+"":t,e);class be{constructor({schema:t,object:e,context:s,values:n,match:r}){kt(this,"object"),kt(this,"schema"),kt(this,"context"),kt(this,"values"),kt(this,"match"),this.schema=t,this.object=e,this.context=s,this.values=n,this.match=r}extend(t,e){const s=nt({mode:"merge",phase:"build",...t.meta},this.schema,t,e.environment),n=s.schema&&nt({mode:this.match?"match":"merge",phase:"validate",...this.object?.meta},s.schema,this.object,e.environment);return n?.schema&&!n.context.environment.exhausted()?{matching:n,progress:new be({schema:s.schema,context:s.context,object:this.object,values:{...e.values,...this.values}})}:{matching:{...s,schema:void 0}}}}var ea=Object.defineProperty,sa=(i,t,e)=>t in i?ea(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,J=(i,t,e)=>sa(i,typeof t!="symbol"?t+"":t,e);function ia(i,t){return t.endpoint==="-/-"?[{action:"-",service:"-",configuration:{name:"-",config:[{}],path:"-"},layers:[{path:"-",steps:[{type:"request",computations:{},values:{},request:{headers:new Headers}}]}]}]:Object.values(i).filter(({configuration:{name:e},service:s})=>t.endpoint?t.endpoint===e:`${s}/default`!==e).filter(({service:e})=>t.service?t.service===e:t.endpoint||e!=="default").filter(({action:e})=>!t.action||t.action===e)}function na(i,t){return Object.values(i).filter(({service:e})=>t.service?t.service===e:e!=="default").filter(({configuration:{name:e},service:s})=>`${s}/default`===e).filter(({action:e})=>!t.action||t.action===e)}class ra{constructor(t,e,s){J(this,"context"),J(this,"request"),J(this,"endpoint"),J(this,"responseLayers",[]),J(this,"acceptedMixins",[]),J(this,"todoMixins",[]),J(this,"implied"),J(this,"archetypeSchema"),J(this,"requestSchema"),J(this,"requestContext"),this.context=t,this.request=e,this.endpoint=s,this.implied=aa(t.values),this.archetypeSchema=ze()}match(){const{endpoint:{configuration:{name:t,...e},layers:s}}=this,n=this.applyLayers({configuration:e,layers:s,specifier:t});if(n){for(n.match.requestSchema&&this.acceptSlice(n);this.todoMixins.length;){const r=this.todoMixins.shift(),o=this.applyLayers(r);o&&o.match.matcher&&(this.acceptedMixins.push(r.specifier),this.acceptSlice(o))}if(this.requestContext&&this.requestSchema){const{requestSchema:r,requestContext:o,endpoint:a,responseLayers:h,acceptedMixins:c,endpoint:{service:l,action:u},context:{values:f},implied:d}=this;return{schema:r,context:o,endpoint:{...a,configuration:{...a.configuration,mixin:c,name:t}},service:l,action:u,layers:h,values:{...o?.environment.implied(d),...f}}}return{diagnostics:n.match.mismatchContext?.diagnostics,endpoint:this.endpoint}}}applyLayers({configuration:t,layers:e}){const{context:{app:s},requestContext:n,implied:r,archetypeSchema:o}=this,a={...this.endpoint,configuration:Ut({name:this.endpoint.configuration.name,configurations:[this.endpoint.configuration,t],mixing:!0})};if(n&&Z({endpoint:a,app:s(),values:{...r,...this.context.values}}).init({context:n}).choose(r).exhausted())return!1;const h=Z({app:s(),endpoint:a,values:{...r,...this.context.values},context:n}),c=new be({schema:o,object:this.request,context:n,values:{...r,...this.context.values}}),l=this.matchLayers({environment:h,implied:r,layers:e,matcher:c});if(l)return{match:l,endpoint:a}}matchLayers({implied:{...t},environment:e,layers:s,matcher:n}){const{request:r}=this;let o,a,h;return s=Fs(s),s.every(({steps:l})=>{if(!l.some(Qt))return!0;for(;l.length;){const u=l.shift();if(!Qt(u)||t.variant&&u.variant&&t.variant!=u.variant||r.method!==void 0&&u.request.method!==void 0&&r.method!==u.request.method)continue;const f=n.extend({...u.request,computations:u.computations},{environment:e,values:u.values});if(f?.matching.schema){u.variant&&(t.variant??(t.variant=u.variant)),n=f.progress,o=f.matching.schema,a=f.matching.context;const{context:d,error:m}=f.matching;if(m)throw m;return Object.assign(t,d.environment.implied(t,d)),!0}h??(h=f?.matching.context)}return!1})?{matcher:n,requestSchema:o,requestContext:a,implied:t,layers:s}:{mismatchContext:h}}acceptSlice({match:{requestSchema:t,requestContext:e,layers:s,matcher:n,implied:r},endpoint:o}){const{todoMixins:a,context:{app:h},endpoint:{configuration:{name:c}}}=this,{compiler:l,collection:u}=h();this.archetypeSchema=n.schema,e&&(this.requestSchema=t,this.requestContext=e),this.endpoint=o;const f=o.configuration.mixin;o.configuration.mixin=[],Object.assign(this.implied,n.values,r),this.responseLayers.push(...s.map(({steps:m,...p})=>({steps:m.filter(g=>!Qt(g)),...p,configuration:o.configuration})));const d=[];for(const{mixin:{configuration:m,layers:p},specifier:g}of[f||[]].flat(1).map(w=>{const y=l.resolveModule(w,o.configuration.path??c);if(!u.mixins[y])throw console.error(new Error("mixin not found: "+y)),new Error("mixin not found: "+y);return{mixin:u.mixins[y],specifier:w}}))d.push({configuration:m,layers:Fs(p),specifier:g});a.unshift(...d)}}function Fe(i,t,e){try{const s=new ra(i,t,e).match();return s?.schema?{status:"fulfilled",value:s}:{status:"rejected",reason:s?.diagnostics}}catch(s){return{status:"rejected",reason:s}}}function _s(i){return i.filter(t=>t.status==="fulfilled").map(({value:t})=>t).filter(Boolean).length>0}function oa(i,t){const{values:e,app:s}=t,{endpoints:n}=s().collection,r=ia(n,e).map(a=>Fe(t,i,a));if(_s(r)||t.values.endpoint)return r;const o=na(n,e).map(a=>Fe(t,i,a));return _s(o)||t.values.service||t.values.action?o:n["default/default"]?[Fe(t,i,n["default/default"])]:[]}function aa(i){return q(i,{values:String,select:ie})}function Fs(i){return i.map(({steps:[...t],...e})=>({...e,steps:t}))}const ha=(i,{context:t,fetchObject:e})=>{if(i.length!==1){const s=i.map(({endpoint:{configuration:{name:r}}})=>r),n=["pathname","origin"];for(const r of n){const{template:o}=Be(e[r]??""),a=i.filter(({endpoint:{layers:h}})=>h.flatMap(({steps:c})=>c.filter(Qt)).some(({request:{[r]:c}})=>c&&Be(c).template===o));if(a.length===1){i=a;break}}if(i.length===1)return i[0];throw new G(`${i.length?`ambiguous ask:${s.map(r=>`
 - ${r}`).join("")}
`:`no matches for
`}${e.method??"GET"} ${ut(e)} (${Ft.stringify(t.values)})`)}return i[0]};function ca(i){if(i===void 0)return;const{values:t,...e}=ne.parse(i);return ne.stringify({...e,values:es(t??{})})}function la(i){return{values:es(i??{}),secrets:ua(i??{})}}function es(i){return Fi(q(i,{filter:t=>!de(Je(t))}))}function ua(i){return Fi(q(i,{filter:t=>de(Je(t))}))}function Fi(i){return q(i,{keys:t=>Je(t).param})}const _a=qn({init({url:i,init:t,values:e,options:s,app:n,ask:r,...o}){const{method:a=e.method,headers:h=[],body:c=void 0,meta:l}=t??{};return{url:i,init:t,...la(e),options:s,timestamps:{intent:Date.now()},durations:{},app:n,ask:ca(r)??ne.stringify({...i&&Le(i),method:a,headers:new Headers(h),body:c,values:es(e),meta:l}),...o}},async match({context:{url:i,init:t,configuration:e,...s}}){if(e){const a=hs(i,t),{values:h}=s,c=s.app(),l={action:"flow",layers:[],service:"flow",configuration:e},{schema:u,context:f}=nt({mode:"merge",phase:"build"},ze(),a,Z({app:c,endpoint:l,values:h}));return{endpoint:l,values:h,schema:u,layers:[],context:f}}const n=hs(i,t);if(typeof s.values?.method=="string"&&(n.method??(n.method=s.values.method),s.values.method!==n.method))throw new Error("specified values method does not match reqeust method");if(n.origin&&(n.pathname||(n.pathname="/")),s.options?.unmatched){const{values:a}=s,h=s.app(),c={service:"-",action:"-",layers:[],configuration:{path:"-",name:"-",config:[{}],mixin:[],defaults:{}}},l=ze(),u=nt({mode:"merge",phase:"build"},l,n,Z({app:h,endpoint:c,values:a}));if(!u.schema)throw Error("unmatched match failure");return{schema:u.schema,context:u.context,endpoint:c,values:a,layers:[]}}const r=oa(n,s);if(r.length===1){const[a]=r;if(a.status==="rejected"){let h=[a.reason].flat()[0];throw h?.err&&(h=h.err),new G(`error matching ask to endpoint(s): ${h?.stack??h}`)}else if(a.value?.schema===void 0)throw new G(`error(s) matching ask to ${a.value?.endpoint.configuration.name}:${a.value?.diagnostics?.map(({loc:h,err:c})=>typeof c=="string"?c:c?.stack?.split(`
`).slice(0,2).join(`
  `)??h).join(`
`)}`)}const o=r.filter(a=>a.status==="fulfilled").map(({value:a})=>a).filter(Boolean);return s.select?.(o,{context:s,fetchObject:n})??ha(o,{context:s,fetchObject:n})},async preview({context:i,match:{schema:t,values:e,endpoint:s}}){const{values:n}=i,r=i.app(),o=Z({endpoint:s,values:e,app:r,options:{"pretty-print":!0,secrets:!0}}),a=await as(t,o),h=a.context.evaluationScope.resolvedValues({secrets:!1}),c=Z({endpoint:s,values:{...e,...h},app:r,options:{"pretty-print":!0,secrets:!1}}),l=await as(t,c),u=Is(t,l.output,s,r,n);return{request:{...a.output,meta:re({...a.output.meta,body:void 0}),values:gt(a.context,{secrets:!0})},redacted:{...l.output,meta:re({...l.output.meta,body:void 0}),values:gt(l.context)},reduced:u,evaluationScope:a.context.evaluationScope}},async render({context:i,match:{schema:t,values:e,endpoint:s,layers:n}}){const{durations:r,runtime:o,options:a,values:h,secrets:c,init:{computations:l}={}}=i,u=i.app(),f=nt({mode:"merge",phase:"build"},t,{computations:nn(l)});if(!f.schema)throw new G("unexpected: failed to merge computations into matched schema: "+(f.error??f.context?.diagnostics[0]));t=f.schema;const d=Date.now(),m=Z({endpoint:s,values:e,secrets:c,app:u,runtime:o,options:{"pretty-print":a?.pretty??!1,secrets:!0}}),p=await rn(t,m);for(const{steps:S}of n)for(;S.length&&Ee(S[0]);){const $=S.shift();await da(i,$,{values:{...p.context.environment.contextValues,...p.context.evaluationScope.resolvedValues({secrets:!0}),egress:p.output}})}const g=p.context.evaluationScope.resolvedValues({secrets:!1}),w=Z({endpoint:s,values:{...e,...g},secrets:c,app:u,runtime:{},options:{"pretty-print":a?.pretty??!0,secrets:!1}}),y=nt({mode:"match",phase:"build"},t,p.output,w);y.schema||console.error("failed to redact output: ",y.error??y.context?.diagnostics[0]);const b=await os(y.schema,w),v=Is(t,b.output,s,u,h);return r.render=Date.now()-d,{request:{...p.output,values:Ls(gt(p.context,{secrets:!0}))},redacted:{...b.output,values:Ls(gt(p.context))},reduced:v,evaluationScope:p.context.evaluationScope}},async fetch({context:{timestamps:i},egress:{request:t}}){i&&(i.request=Date.now());const[e,s]=Ws(t);s.headers??(s.headers=new Headers),s.headers.append("Connection","close");try{return await sn(await fetch(e,s))}finally{i.response=Date.now()}},async process({context:i,egress:t,match:e,error:s,ingress:n}){const{layers:r,endpoint:o}=e;if(!n)throw s;const a=i.app(),h=Date.now(),c=n.meta?.body??en(n.body??"",n.headers)??"raw";let l,u,f=new be({schema:ns(),match:!0,object:{...n,statusText:n.statusText?.trim()||void 0},values:{}});t:for(const{steps:g}of r)for(;g.length;){if(!g.some(rs))continue t;for(;!rs(g[0]);)g.shift();const w=g.shift(),{status:y,headers:b,body:v,outcome:S,meta:$}=w,V=f.extend({status:y,headers:b,meta:$,...v&&{body:v}},{environment:new We});if(V?.progress){f=V.progress,S&&(u??(u=S)),l=V.matching.schema;break}else for(;g.length&&Ee(g[0]);)g.shift()}if(!l){const g=ns();l=nt({mode:"match",phase:"build",body:c},g,n,new We).schema??g}i.timestamps.response=h,i.durations.request=h-i.timestamps.request;const[d,m]=await Promise.all([{secrets:!0},{secrets:!1}].map(async({secrets:g})=>{const{output:w,context:y}=await os(l,Z({endpoint:{...o,configuration:{name:o.configuration.name,path:o.configuration.path,import:o.configuration.import,config:[{}]}},app:a,options:{"pretty-print":!0,secrets:g}}));return{context:y,response:w,evaluationScope:y.evaluationScope,values:fa(gt(y,{secrets:g}))}})),p=m.evaluationScope.resolvedValues({exportsOnly:!0});for(const{steps:g}of r)for(;g.length&&Ee(g[0]);){const w=g.shift(),{service:y,action:b,configuration:{name:v}}=o;await pa(d.context,w,{values:{service:y,action:b,endpoint:v,...i.values,...t.request.values,...d.values,egress:t.request,ingress:n}})}return{endpoint:o.configuration.path,egress:t,ingress:{actual:n,outcome:u,evaluationScope:d.evaluationScope,response:d.response,secrets:d.values,redacted:m.response,values:m.values},output:p}},error(){}});function Ls(i){return Js({...i,pathname:void 0,origin:void 0,search:void 0,method:void 0})}function fa(i){return Js({...i,status:void 0,statusText:void 0})}function Is(i,t,e,s,n){const r=Z({endpoint:e,values:{},app:s,runtime:{},options:{secrets:!1}}),o={...n};try{const a=nt({mode:"match",phase:"build"},i,t,r);if(a.error)throw a.error;const h=gt(a.context);for(const[c,l]of Object.entries(h))try{(o[c]==l||ls(o[c])===ls(l))&&delete o[c]}catch(u){}}catch{}return o}async function da(i,t,{values:e}){const s=`(() => { ${t.script} ;;; })()`;await Gs(s,{binding(n){return e[n]??globalThis[n]}})}async function pa(i,t,{values:e}){const s=`(() => { ${t.script} ;;; })()`;await Gs(s,{binding(n){return e[n]??globalThis[n]??{get secrets(){return Pi(i)}}[n]}})}let se;Po().then(i=>se=i);function Fa(i={},t){if(!se)throw new Error("pardon: no pardon runtime context loaded");return ma({context:{app:()=>se,durations:{},timestamps:{},values:i,...t},execution:se.execution})}function ma({context:i,execution:t}){const e=(n,...r)=>{const o=String.raw(n,...r),{values:a,...h}=ne.parse(o,{acceptcurl:i.options?.parsecurl});function c(){return t.init({...i,url:ut(h),init:{...h},values:Object.assign({},a,i.values??{})})}return Object.assign(()=>c().result,{init(){return c()},preview(){return c().preview},render(){return c().egress},async request(){return(await c().egress).request}})};function s(...[n,r,o]){return{...o,url:n?.toString(),init:{...r,headers:new Headers(r?.headers)},values:Object.assign({},i.values??{}),options:{...i?.options,...o?.options},app:i.app}}return Object.assign(e,{match(...[n,r,o]){return t.match(s(n,r,o))},preview(...[n,r,o]){return t.preview(s(n,r,o))},render(...[n,r,o]){return t.render(s(n,r,o))},fetch(...[n,r,o]){return t.process(s(n,r,o))}})}Promise.resolve();function La({config:i,layers:t,database:e,samples:s,example:n,secrets:r}){const o=Uo(t),a=Ro({collection:o});return{config:i,collection:o,compiler:a,database:e,samples:s,example:n,secrets:r??Mo()}}function ss(i){return typeof i!="object"||Ue(i)}function ga(i,t){return Ue(i)&&Ue(t)&&i.source!==void 0&&t.source!==void 0?i.source===t.source:i?.valueOf()===t?.valueOf()}const F=Symbol("alt"),O=Symbol("gen");function H(i){if(i.parent){const t=H(i.parent);return{environment:{...t.environment,...i.environment},defs:{...t.defs,...i.defs}}}return i}let St=[];function Li(i,t){const e=St;try{return St=i,t()}finally{St=e}}function wa(i){if(X(i))return i;const t=[],e=Li(t,i);return t.length&&t[0]!==e?He(...t):zt(e)?e:He(...t)}function le(i){if(X(i))lt(i);else if(Array.isArray(i))for(const t of i)le(t);else i&&!ss(i)&&le(Object.values(i));return i}function He(...i){return le(i),{async[O](t){for(const{[O]:e}of i)t=await e(t);return t}}}function is(i,t){return rt({[O]:e=>et(e,i),...t&&{[F]:e=>t(e)}})}function X(i){return i?typeof i=="object"&&typeof i[O]=="function":!1}function zt(i){return i?typeof i=="object"&&typeof i[F]=="function":!1}function rt(i){const t=Se(i);return X(t)&&St?.push(t),t}function Se(i){if(typeof i=="function")return lt(wa(i));if(X(i))return lt(i);throw new Error(`cannot regenerate ${typeof i} (${i})`)}function lt(i){const t=St.indexOf(i);return t!==-1&&St.splice(t,1),i}async function U(i,t){if(t=H(t),i=await i,!i||ss(i))return[i];if(typeof i[F]=="function")return et(i[F](t),o=>U(o,t));if(Array.isArray(i)){if(i.length===0)return[[]];const[o,...a]=i,h=[],c=await U(a,t);for(const l of await U(o,t))h.push(c.flatMap(u=>[l,...u]));return h.flat(1)}if(Object.keys(i).length===0)return[{}];const[[e,s],...n]=Object.entries(i),r=n.reduce((o,[a,h])=>Object.assign(o,{[a]:h}),{});return et(U(s,t),async o=>(await U(r,t)).map(a=>({[e]:o,...a})))}function ya(i,t){return U(t,i)}function va(i){return t=>{function e(s){return!s||ss(s)?n=>ga(n,s):n=>Object.entries(s).every(([r,o])=>e(o)(n?.[r]))}return e(i)(H(t).environment)}}function ue(i){return(...t)=>{if(t.length===0)return{[F]:async()=>[],[O]:async()=>[]};if(t.every(n=>typeof n!="function"&&!X(n)))return{[F]:i(...t)};const e=t.map(Se),s=i(...e);return is(async n=>et(s(),r=>r[O]([n])))}}function ba(i){return{[F]:async t=>[i(t)]}}function Ia(i,t){return{[F]:async e=>et(U(t,e),s=>i(e,s))}}function Et(...i){const t=i.map(e=>typeof e=="function"?Se(e):lt(e));if(t.length===1){if(zt(t[0]))return t[0];if(!X(t[0]))return ba(()=>t[0])}if(t.length>1&&!t.every(e=>X(e)))throw new Error("testcases cannot intepret a non-singular non-generation value");return lt(He(...t))}async function Na(i,t){const{environment:e}=i;le(t);const s=await U(t,i);return(await et(s,async n=>await U([...Object.entries(e).filter(([r])=>!(r in n)),...Object.entries(n)].reduce((r,[o,a])=>Object.assign(r,{[o]:a}),{}),i))).map(n=>({...i,environment:n}))}function Wa(i,t=[{environment:{},defs:{}}]){return Li([{[O]:async()=>t}],()=>Se(()=>i())[O](t))}function za(i,t){typeof i=="boolean"&&(i=(h=>()=>h)(i)),typeof i=="string"&&(i={[i]:t});const e=h=>typeof h=="boolean"?()=>h:va(h);let s={[O]:async h=>h,[F]:async()=>[]},n={[O]:async()=>[],[F]:async()=>[]},r;async function o(h,c){return et(U(h,c),async l=>{if(typeof l=="function"){const u=H(c);return o(await l(u.environment,u.defs),c)}return await U(l,c)})}const a=r=rt({async[O](h){return!X(s)||!X(n)?h:et(h,async c=>((await o(i,c)).filter(u=>e(u)(c)).length?s:n)[O]([c]))},async[F](h){return!zt(s)||!zt(n)?[]:[((await o(i,h)).filter(l=>e(l)(h)).length?s:n)[F](h)]},then(...h){s=Et(...h),n=Et();const{then:c,...l}=a;return lt(r),rt(r=l)},else(...h){n=Et(...h);const{then:c,else:l,...u}=a;return lt(r),rt(r=u)}});return a}function Ba(...i){const t=Et(...i);return{export:(...e)=>{const s=Et(...e);return rt({async[O](n){const r=await t[O](n.map(o=>({environment:{},defs:{},parent:o})));return(await s[O](r.map(o=>({environment:{},defs:{},parent:o})))).map(({environment:o,defs:a,parent:h})=>H({environment:o,defs:a,parent:h.parent}))}})}}}function Ua(i,...t){const e=Et(...t);return is(async({defs:s,...n})=>[{defs:{...s,[i]:e},...n}])}function Ga(i){return is(async t=>{const e=H(t).defs[i];if(e===void 0)throw new Error(`exe: ${String(i)} - not fun`);return X(e)?e[O]([t]):[t]},t=>{const e=H(t).defs[i];if(!zt(e))throw new Error(`exe: ${String(i)} - not a value alternation: `);return e[F](t)})}function Sa(i=1,t=524287n,e=1337n,s=2n**29n){let n=BigInt(i);return r=>Number(n=(n*t+e*BigInt(r??1))%s)}function qa(i=1){if(i===0)return()=>{};const t=Sa(i);return rt({async[O](e){const s=[...e];for(let n=s.length-1;n>=0;n--){const r=t()%(n+1);[s[r],s[n]]=[s[n],s[r]]}return s}})}function Ha(i){return rt({async[O](t){return[...t].sort((e,s)=>{const n=H(e).environment[i],r=H(s).environment[i];return typeof n=="number"&&typeof r=="number"?n-r:String(n).localeCompare(r)})}})}function Va(i,t=e=>H(e).environment){return typeof i=="function"&&(t=i,i=void 0),i??(i="debug"),rt({async[O](e){console.info(`----- cases at ${i} -----`);let s=1;for(const n of e)console.info(` - ${i} (${s++}):`,t(n));return e}})}function Ka(i,t){return{async[F](e){const s=H(e);return et(ya(s,i),n=>s.environment[n]??t)}}}async function et(i,t){return(await Promise.all((await i).map(t))).flat(1)}const Ja=Object.assign(ue((...i)=>async()=>i),{apply:ue(i=>async()=>await i)}),Ya=Object.assign(ue((...i)=>{if(i.length===0)throw new Error("empty round robin");let t=0;return async()=>(t===i.length&&(t=0),[i[t++]])}),{apply:ue(i=>{let t=0;return async()=>{const e=await i;if(e.length===0)throw new Error("empty round robin");return t===e.length&&(t=0),[e[t++]]}})}),Lt=[],Ve=[];function Ea(i){try{const t=i();return typeof t?.then=="function"&&Lt.push(Ne(t)),t}catch(t){throw Lt.push(Ne(Promise.reject(t))),t}}async function Za(i){for(;Lt.length;)await Promise.all(Lt.splice(0,Lt.length));return Ve.splice(0,Ve.length).map(({name:t,descriptions:e,definition:s})=>({descriptions:[i.setup,...e,({set:n,format:r,fun:o})=>{const a=ln(...[i.prefix,...t].filter(Boolean));n("testcase",r(a)),o("trial",`${++Oa}/${a}`),n("::testexecution",async h=>(await null,await s(h)))}].filter(Boolean)}))}const Bt=new cn;function Xa(i){return Bt.run({name:[],descriptions:[]},i)}function xa(i){const{descriptions:t}=Bt.getStore();return t.push(i),{trial(...e){if(t.pop()!==i)throw new Error("cases.trial invoked late");Ca(()=>{xa(i),$a(...e)})}}}function fe(i,t){const e=Bt.getStore();return Ea(()=>Bt.run({...e,name:[...e.name||[],...i?[i]:[]],descriptions:[...e.descriptions||[]]},t))}function Ca(i,t){return t?fe(i,t):fe(void 0,i)}let Oa=0;function Ns(i){const{name:t,descriptions:e}=Bt.getStore();Ve.push({name:t,descriptions:[...e],definition:i})}function $a(i,t){return t?fe(i,()=>Ns(e=>(environment=e,t(e)))):fe(void 0,()=>Ns(e=>(environment=e,i(e))))}export{ya as A,Ea as B,Xa as C,Za as D,$a as E,xa as F,Ca as G,ne as H,ma as I,_n as J,_a as P,Po as a,Fo as b,Mi as c,Is as d,Fa as e,Va as f,Wa as g,Ha as h,Mo as i,qa as j,Ga as k,Ba as l,Ua as m,H as n,za as o,qn as p,Ya as q,La as r,Nn as s,Ja as t,Ka as u,le as v,Ia as w,ba as x,is as y,Na as z};
